generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Post {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([name])
}

model Country {
  id                          String                    @id @default(cuid())
  name                        String                    @unique
  slug                        String?                   @unique
  continent                   String?
  region                      String?
  governmentType              String?
  religion                    String?
  leader                      String?
  flag                        String?
  coatOfArms                  String?
  landArea                    Float?
  areaSqMi                    Float?
  baselinePopulation          Float
  baselineGdpPerCapita        Float
  maxGdpGrowthRate            Float
  adjustedGdpGrowth           Float
  populationGrowthRate        Float
  currentPopulation           Float
  currentGdpPerCapita         Float
  currentTotalGdp             Float
  populationDensity           Float?
  gdpDensity                  Float?
  economicTier                String
  populationTier              String
  projected2040Population     Float                     @default(0)
  projected2040Gdp            Float                     @default(0)
  projected2040GdpPerCapita   Float                     @default(0)
  actualGdpGrowth             Float                     @default(0)
  nominalGDP                  Float?
  realGDPGrowthRate           Float?
  inflationRate               Float?
  currencyExchangeRate        Float?
  laborForceParticipationRate Float?
  employmentRate              Float?
  unemploymentRate            Float?
  totalWorkforce              Float?
  averageWorkweekHours        Float?
  minimumWage                 Float?
  averageAnnualIncome         Float?
  taxRevenueGDPPercent        Float?
  governmentRevenueTotal      Float?
  taxRevenuePerCapita         Float?
  governmentBudgetGDPPercent  Float?
  budgetDeficitSurplus        Float?
  internalDebtGDPPercent      Float?
  externalDebtGDPPercent      Float?
  totalDebtGDPRatio           Float?
  debtPerCapita               Float?
  interestRates               Float?
  debtServiceCosts            Float?
  povertyRate                 Float?
  incomeInequalityGini        Float?
  socialMobilityIndex         Float?
  totalGovernmentSpending     Float?
  spendingGDPPercent          Float?
  spendingPerCapita           Float?
  lifeExpectancy              Float?
  urbanPopulationPercent      Float?
  ruralPopulationPercent      Float?
  literacyRate                Float?
  localGrowthFactor           Float                     @default(1.0)
  economicVitality            Float                     @default(0)
  populationWellbeing         Float                     @default(0)
  diplomaticStanding          Float                     @default(0)
  governmentalEfficiency      Float                     @default(0)
  overallNationalHealth       Float                     @default(0)
  activeAlliances             Int                       @default(0)
  activeTreaties              Int                       @default(0)
  diplomaticReputation        String                    @default("Neutral")
  publicApproval              Float                     @default(50)
  governmentEfficiency        String                    @default("Moderate")
  politicalStability          String                    @default("Stable")
  tradeBalance                Float                     @default(0)
  infrastructureRating        Float                     @default(50)
  geometry                    Json?
  centroid                    Json?
  boundingBox                 Json?
  coastlineKm                 Float?
  usesAtomicGovernment        Boolean                   @default(true)
  hideDiplomaticOps           Boolean                   @default(false)
  hideStratcommIntel          Boolean                   @default(false)
  lastCalculated              DateTime                  @default(now())
  baselineDate                DateTime                  @default(now())
  createdAt                   DateTime                  @default(now())
  updatedAt                   DateTime                  @updatedAt
  geom_postgis                Unsupported("geometry")?
  atomicEconomicImpacts       AtomicEconomicImpact[]    @relation("AtomicEconomicImpacts")
  atomicEffectiveness         AtomicEffectiveness?
  borderSecurity              BorderSecurity?           @relation("CountryBorderSecurity")
  budgetScenarios             BudgetScenario[]          @relation("CountryBudgetScenarios")
  componentChanges            ComponentChangeLog[]      @relation("CountryComponentChanges")
  componentSynergies          ComponentSynergy[]        @relation("CountrySynergies")
  archetypeMatches            CountryArchetypeMatch[]   @relation("CountryArchetypes")
  followers                   CountryFollow[]           @relation("CountryFollowing")
  following                   CountryFollow[]           @relation("CountryFollowers")
  moodMetrics                 CountryMoodMetric[]
  crossBuilderSynergies       CrossBuilderSynergy[]     @relation("CountryCrossBuilderSynergies")
  defenseBudget               DefenseBudget?            @relation("CountryDefenseBudget")
  demographics                Demographics?
  dmInputs                    DmInputs[]
  economicComponents          EconomicComponent[]       @relation("CountryEconomicComponents")
  economicModel               EconomicModel?
  economicProfile             EconomicProfile?
  embassiesGuest              Embassy[]                 @relation("GuestCountryEmbassies")
  embassiesHosting            Embassy[]                 @relation("HostCountryEmbassies")
  fiscalPolicies              FiscalPolicy[]            @relation("CountryFiscalPolicies")
  fiscalSystem                FiscalSystem?
  governmentBudget            GovernmentBudget?
  governmentComponents        GovernmentComponent[]     @relation("CountryComponents")
  governmentStructure         GovernmentStructure?
  historicalData              HistoricalDataPoint[]
  incomeDistribution          IncomeDistribution?
  stabilityMetrics            InternalStabilityMetrics? @relation("CountryStabilityMetrics")
  laborMarket                 LaborMarket?
  militaryBranches            MilitaryBranch[]          @relation("CountryMilitaryBranches")
  personalityAssignment       NPCPersonalityAssignment?
  nationalIdentity            NationalIdentity?
  securityAssessment          SecurityAssessment?       @relation("CountrySecurityAssessment")
  securityEvents              SecurityEvent[]           @relation("CountrySecurityEvents")
  securityThreats             SecurityThreat[]          @relation("CountrySecurityThreats")
  taxComponents               TaxComponent[]            @relation("CountryTaxComponents")
  taxSystem                   TaxSystem?
  thinkpagesAccounts          ThinkpagesAccount[]       @relation("ThinkpagesAccounts")
  users                       User[]                    @relation("UserCountry")
  borderHistory               BorderHistory[]
  cities                      City[]                    @relation("CountryCities")
  pointsOfInterest            PointOfInterest[]         @relation("CountryPOIs")
  subdivisions                Subdivision[]             @relation("CountrySubdivisions")
  territories                 Territory[]

  @@index([name])
  @@index([economicTier])
  @@index([populationTier])
  @@index([continent])
  @@index([region])
  @@index([geom_postgis], map: "idx_country_geom", type: Gist)
  @@index([name], map: "idx_country_name")
}

model Territory {
  id           String                   @id @default(cuid())
  countryId    String
  name         String
  geometry     Json
  isMainland   Boolean                  @default(false)
  areaSqKm     Float?
  geom_postgis Unsupported("geometry")?
  country      Country                  @relation(fields: [countryId], references: [id], onDelete: Cascade)

  @@index([geom_postgis], map: "idx_territory_geom", type: Gist)
  @@map("territories")
}

model BorderHistory {
  id            String   @id @default(cuid())
  countryId     String
  geometry      Json
  changedBy     String
  changedAt     DateTime @default(now())
  reason        String?
  oldAreaSqMi   Float?
  newAreaSqMi   Float?
  areaDeltaSqMi Float?
  country       Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId, changedAt])
  @@map("border_history")
}

model EconomicProfile {
  id                  String   @id @default(cuid())
  countryId           String   @unique
  gdpGrowthVolatility Float?
  economicComplexity  Float?
  innovationIndex     Float?
  competitivenessRank Int?
  easeOfDoingBusiness Int?
  corruptionIndex     Float?
  sectorBreakdown     String?
  exportsGDPPercent   Float?
  importsGDPPercent   Float?
  tradeBalance        Float?
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  country             Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)
}

model LaborMarket {
  id                      String   @id @default(cuid())
  countryId               String   @unique
  employmentBySector      String?
  youthUnemploymentRate   Float?
  femaleParticipationRate Float?
  informalEmploymentRate  Float?
  medianWage              Float?
  wageGrowthRate          Float?
  wageBySector            String?
  createdAt               DateTime @default(now())
  updatedAt               DateTime @updatedAt
  country                 Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)
}

model FiscalSystem {
  id                       String   @id @default(cuid())
  countryId                String   @unique
  personalIncomeTaxRates   String?
  corporateTaxRates        String?
  salesTaxRate             Float?
  propertyTaxRate          Float?
  payrollTaxRate           Float?
  exciseTaxRates           String?
  wealthTaxRate            Float?
  spendingByCategory       String?
  fiscalBalanceGDPPercent  Float?
  primaryBalanceGDPPercent Float?
  taxEfficiency            Float?
  createdAt                DateTime @default(now())
  updatedAt                DateTime @updatedAt
  country                  Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)
}

model IncomeDistribution {
  id                        String   @id @default(cuid())
  countryId                 String   @unique
  economicClasses           String?
  top10PercentWealth        Float?
  bottom50PercentWealth     Float?
  middleClassPercent        Float?
  intergenerationalMobility Float?
  educationMobility         Float?
  createdAt                 DateTime @default(now())
  updatedAt                 DateTime @updatedAt
  country                   Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)
}

model GovernmentBudget {
  id                    String   @id @default(cuid())
  countryId             String   @unique
  spendingCategories    String?
  spendingEfficiency    Float?
  publicInvestmentRate  Float?
  socialSpendingPercent Float?
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  country               Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)
}

model Demographics {
  id                         String    @id @default(cuid())
  countryId                  String    @unique
  ageDistribution            String?
  regions                    String?
  educationLevels            String?
  citizenshipStatuses        String?
  birthRate                  Float?
  deathRate                  Float?
  migrationRate              Float?
  dependencyRatio            Float?
  medianAge                  Float?
  populationGrowthProjection Float?
  ethnicDiversity            Float?    @default(50)
  religiousDiversity         Float?    @default(50)
  linguisticDiversity        Float?    @default(30)
  culturalDiversity          Float?    @default(50)
  diversityLastUpdated       DateTime?
  diversitySource            String?
  createdAt                  DateTime  @default(now())
  updatedAt                  DateTime  @updatedAt
  country                    Country   @relation(fields: [countryId], references: [id], onDelete: Cascade)
}

model HistoricalDataPoint {
  id                   String   @id @default(cuid())
  countryId            String
  ixTimeTimestamp      DateTime
  population           Float
  gdpPerCapita         Float
  totalGdp             Float
  populationGrowthRate Float
  gdpGrowthRate        Float
  landArea             Float?
  populationDensity    Float?
  gdpDensity           Float?
  createdAt            DateTime @default(now())
  country              Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([ixTimeTimestamp])
}

model VitalityHistory {
  id                     String   @id @default(cuid())
  countryId              String
  economicVitality       Float
  populationWellbeing    Float
  diplomaticStanding     Float
  governmentalEfficiency Float
  overallHealth          Float
  timestamp              DateTime @default(now())

  @@index([countryId, timestamp])
  @@index([timestamp])
}

model ComponentEffectivenessHistory {
  id                 String   @id @default(cuid())
  countryId          String
  componentId        String
  componentType      String
  effectivenessScore Float
  timestamp          DateTime @default(now())

  @@index([componentId])
  @@index([timestamp])
  @@index([countryId, componentType, timestamp], map: "ComponentEffectivenessHistory_countryId_componentType_idx")
}

model DiplomaticRelationshipHistory {
  id               String   @id @default(cuid())
  country1Id       String
  country2Id       String
  strength         Float
  relationship     String
  treaties         String?
  tradeVolume      Float    @default(0)
  culturalExchange String   @default("Medium")
  timestamp        DateTime @default(now())

  @@index([timestamp])
  @@index([country1Id, country2Id, timestamp], map: "DiplomaticRelationshipHistory_country1Id_country2Id_idx")
}

model DmInputs {
  id              String   @id @default(cuid())
  countryId       String?
  ixTimeTimestamp DateTime
  inputType       String
  value           Float
  description     String?
  duration        Int?
  isActive        Boolean  @default(true)
  createdBy       String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  country         Country? @relation(fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([ixTimeTimestamp])
  @@index([isActive])
  @@index([inputType])
}

model SystemConfig {
  id          String   @id @default(cuid())
  key         String   @unique
  value       String
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([key])
}

model AdminAuditLog {
  id         String   @id @default(cuid())
  action     String
  targetType String
  targetId   String
  targetName String
  changes    String
  adminId    String
  adminName  String
  timestamp  DateTime @default(now())
  ipAddress  String?

  @@index([action])
  @@index([targetId])
  @@index([adminId])
  @@index([timestamp])
}

model CalculationLog {
  id                 String   @id @default(cuid())
  timestamp          DateTime @default(now())
  ixTimeTimestamp    DateTime
  countriesUpdated   Int
  executionTimeMs    Int
  globalGrowthFactor Float
  notes              String?
  createdAt          DateTime @default(now())

  @@index([timestamp])
  @@index([ixTimeTimestamp])
}

model User {
  id                  String                   @id @default(cuid())
  clerkUserId         String                   @unique
  countryId           String?
  roleId              String?
  membershipTier      String                   @default("basic")
  isActive            Boolean                  @default(true)
  createdAt           DateTime                 @default(now())
  updatedAt           DateTime                 @updatedAt
  totalCards          Int                      @default(0)
  deckValue           Float                    @default(0)
  collectorLevel      Int                      @default(1)
  collectorXp         Int                      @default(0)
  AuctionBid          AuctionBid[]
  CardAuction         CardAuction[]
  CardCollection      CardCollection[]
  CardOwnership       CardOwnership[]
  scheduledChanges    ScheduledChange[]        @relation("UserScheduledChanges")
  country             Country?                 @relation("UserCountry", fields: [countryId], references: [id])
  role                Role?                    @relation(fields: [roleId], references: [id])
  archetypeSelections UserArchetypeSelection[] @relation("UserArchetypes")
  vault               MyVault?
  nsVerifications     NSVerification[]

  @@index([clerkUserId])
  @@index([countryId])
  @@index([roleId])
  @@index([membershipTier])
  @@index([isActive])
}

model ScheduledChange {
  id           String    @id @default(cuid())
  userId       String
  countryId    String
  changeType   String
  impactLevel  String
  fieldPath    String
  oldValue     String
  newValue     String
  scheduledFor DateTime
  appliedAt    DateTime?
  status       String    @default("pending")
  warnings     String?
  metadata     String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  user         User      @relation("UserScheduledChanges", fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([countryId])
  @@index([status])
  @@index([scheduledFor])
}

model EconomicModel {
  id                   String           @id @default(cuid())
  countryId            String           @unique
  baseYear             Int
  projectionYears      Int
  gdpGrowthRate        Float
  inflationRate        Float
  unemploymentRate     Float
  interestRate         Float
  exchangeRate         Float
  populationGrowthRate Float
  investmentRate       Float
  fiscalBalance        Float
  tradeBalance         Float
  createdAt            DateTime         @default(now())
  updatedAt            DateTime         @updatedAt
  country              Country          @relation(fields: [countryId], references: [id], onDelete: Cascade)
  policyEffects        PolicyEffect[]
  sectoralOutputs      SectoralOutput[]
}

model SectoralOutput {
  id              String        @id @default(cuid())
  economicModelId String
  year            Int
  agriculture     Float
  industry        Float
  services        Float
  government      Float
  totalGDP        Float
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  economicModel   EconomicModel @relation(fields: [economicModelId], references: [id], onDelete: Cascade)
}

model PolicyEffect {
  id                         String        @id @default(cuid())
  economicModelId            String
  name                       String
  description                String
  gdpEffectPercentage        Float
  inflationEffectPercentage  Float
  employmentEffectPercentage Float
  yearImplemented            Int
  durationYears              Int
  createdAt                  DateTime      @default(now())
  updatedAt                  DateTime      @updatedAt
  economicModel              EconomicModel @relation(fields: [economicModelId], references: [id], onDelete: Cascade)
}

model IntelligenceItem {
  id                String   @id @default(cuid())
  title             String
  content           String
  category          Category
  priority          Priority @default(medium)
  source            String
  timestamp         DateTime
  region            String?
  affectedCountries String?
  isActive          Boolean  @default(true)
  actionable        Boolean  @default(false)
  confidence        Int?
  itemType          String   @default("update")
  severity          Priority @default(medium)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model CrisisEvent {
  id                String   @id @default(cuid())
  type              String
  title             String
  severity          Priority
  affectedCountries String?
  casualties        Int?
  economicImpact    Float?
  responseStatus    String?
  timestamp         DateTime
  description       String?
  location          String?
  category          Category @default(governance)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model DiplomaticRelation {
  id                 String   @id @default(cuid())
  country1           String
  country2           String
  relationship       String
  strength           Int
  treaties           String?
  lastContact        DateTime
  status             String
  diplomaticChannels String?
  recentActivity     String?
  tradeVolume        Float?
  culturalExchange   String?
  economicTier       String?
  flagUrl            String?
  establishedAt      DateTime @default(now())
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@unique([country1, country2])
  @@index([country1])
  @@index([country2])
  @@index([relationship])
  @@index([status])
}

model Treaty {
  id             String   @id @default(cuid())
  name           String
  parties        String?
  type           String
  status         String
  signedDate     DateTime
  expiryDate     DateTime
  description    String?
  complianceRate Int?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model EconomicIndicator {
  id                 String   @id @default(cuid())
  globalGDP          Float
  globalGrowth       Float
  inflationRate      Float
  unemploymentRate   Float
  tradeVolume        Float
  currencyVolatility Float
  timestamp          DateTime
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model Notification {
  id             String   @id @default(cuid())
  userId         String?
  countryId      String?
  title          String
  description    String?
  message        String?
  read           Boolean  @default(false)
  dismissed      Boolean  @default(false)
  href           String?
  type           String?
  category       String?
  priority       String   @default("medium")
  severity       String   @default("informational")
  source         String?
  actionable     Boolean  @default(false)
  metadata       String?
  relevanceScore Float?
  deliveryMethod String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@index([userId, read, dismissed])
  @@index([countryId, read, dismissed])
  @@index([createdAt])
  @@index([priority, read])
}

model UserPreferences {
  id                 String   @id @default(cuid())
  userId             String   @unique
  emailNotifications Boolean  @default(true)
  pushNotifications  Boolean  @default(true)
  economicAlerts     Boolean  @default(true)
  crisisAlerts       Boolean  @default(true)
  diplomaticAlerts   Boolean  @default(false)
  systemAlerts       Boolean  @default(true)
  notificationLevel  String   @default("medium")
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@index([userId])
}

model TaxSystem {
  id                   String           @id @default(cuid())
  countryId            String           @unique
  taxSystemName        String
  taxAuthority         String?
  fiscalYear           String           @default("calendar")
  taxCode              String?
  baseRate             Float?
  progressiveTax       Boolean          @default(true)
  flatTaxRate          Float?
  alternativeMinTax    Boolean          @default(false)
  alternativeMinRate   Float?
  taxHolidays          String?
  complianceRate       Float?
  collectionEfficiency Float?
  lastReform           DateTime?
  createdAt            DateTime         @default(now())
  updatedAt            DateTime         @updatedAt
  taxBrackets          TaxBracket[]
  taxCalculations      TaxCalculation[]
  taxCategories        TaxCategory[]
  taxExemptions        TaxExemption[]
  taxPolicy            TaxPolicy[]
  country              Country          @relation(fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
}

model TaxCategory {
  id                String         @id @default(cuid())
  taxSystemId       String
  categoryName      String
  categoryType      String
  description       String?
  isActive          Boolean        @default(true)
  baseRate          Float?
  calculationMethod String         @default("percentage")
  minimumAmount     Float?
  maximumAmount     Float?
  exemptionAmount   Float?
  deductionAllowed  Boolean        @default(true)
  standardDeduction Float?
  priority          Int            @default(50)
  color             String?
  icon              String?
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  taxBrackets       TaxBracket[]
  taxSystem         TaxSystem      @relation(fields: [taxSystemId], references: [id], onDelete: Cascade)
  taxDeductions     TaxDeduction[]
  taxExemptions     TaxExemption[]

  @@index([taxSystemId])
  @@index([categoryName])
}

model TaxBracket {
  id           String      @id @default(cuid())
  taxSystemId  String
  categoryId   String
  bracketName  String?
  minIncome    Float
  maxIncome    Float?
  rate         Float
  flatAmount   Float?
  marginalRate Boolean     @default(true)
  isActive     Boolean     @default(true)
  priority     Int         @default(50)
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  category     TaxCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  taxSystem    TaxSystem   @relation(fields: [taxSystemId], references: [id], onDelete: Cascade)

  @@index([taxSystemId])
  @@index([categoryId])
  @@index([minIncome, maxIncome])
}

model TaxExemption {
  id              String       @id @default(cuid())
  taxSystemId     String
  categoryId      String?
  exemptionName   String
  exemptionType   String
  description     String?
  exemptionAmount Float?
  exemptionRate   Float?
  qualifications  String?
  isActive        Boolean      @default(true)
  startDate       DateTime?
  endDate         DateTime?
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt
  category        TaxCategory? @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  taxSystem       TaxSystem    @relation(fields: [taxSystemId], references: [id], onDelete: Cascade)

  @@index([taxSystemId])
  @@index([categoryId])
  @@index([exemptionType])
}

model TaxDeduction {
  id             String      @id @default(cuid())
  categoryId     String
  deductionName  String
  deductionType  String
  description    String?
  maximumAmount  Float?
  percentage     Float?
  qualifications String?
  isActive       Boolean     @default(true)
  priority       Int         @default(50)
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  category       TaxCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)

  @@index([categoryId])
  @@index([deductionType])
}

model TaxPolicy {
  id                 String    @id @default(cuid())
  taxSystemId        String
  policyName         String
  policyType         String
  description        String?
  targetCategory     String?
  impactType         String
  rateChange         Float?
  effectiveDate      DateTime
  expiryDate         DateTime?
  isActive           Boolean   @default(true)
  estimatedRevenue   Float?
  affectedPopulation Float?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  taxSystem          TaxSystem @relation(fields: [taxSystemId], references: [id], onDelete: Cascade)

  @@index([taxSystemId])
  @@index([effectiveDate])
  @@index([isActive])
}

model TaxCalculation {
  id                  String    @id @default(cuid())
  taxSystemId         String
  calculationName     String
  taxableIncome       Float
  totalDeductions     Float     @default(0)
  totalExemptions     Float     @default(0)
  adjustedGrossIncome Float
  taxOwed             Float
  effectiveRate       Float
  marginalRate        Float
  breakdown           String?
  calculationDate     DateTime  @default(now())
  taxYear             Int
  isActive            Boolean   @default(true)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
  taxSystem           TaxSystem @relation(fields: [taxSystemId], references: [id], onDelete: Cascade)

  @@index([taxSystemId])
  @@index([taxYear])
  @@index([calculationDate])
}

model GovernmentComponent {
  id                 String             @id @default(cuid())
  countryId          String
  componentType      ComponentType
  effectivenessScore Float              @default(50)
  implementationDate DateTime           @default(now())
  implementationCost Float              @default(0)
  maintenanceCost    Float              @default(0)
  requiredCapacity   Float              @default(50)
  isActive           Boolean            @default(true)
  notes              String?
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt
  synergies          ComponentSynergy[] @relation("PrimaryComponent")
  conflictsWith      ComponentSynergy[] @relation("SecondaryComponent")
  country            Country            @relation("CountryComponents", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([componentType])
  @@index([isActive])
}

model ComponentSynergy {
  id                   String              @id @default(cuid())
  countryId            String
  primaryComponentId   String
  secondaryComponentId String
  synergyType          String
  effectMultiplier     Float               @default(1.0)
  description          String?
  discoveredAt         DateTime            @default(now())
  createdAt            DateTime            @default(now())
  country              Country             @relation("CountrySynergies", fields: [countryId], references: [id], onDelete: Cascade)
  primaryComponent     GovernmentComponent @relation("PrimaryComponent", fields: [primaryComponentId], references: [id], onDelete: Cascade)
  secondaryComponent   GovernmentComponent @relation("SecondaryComponent", fields: [secondaryComponentId], references: [id], onDelete: Cascade)

  @@unique([primaryComponentId, secondaryComponentId])
  @@index([countryId])
  @@index([synergyType])
}

model EconomicComponent {
  id                 String                @id @default(cuid())
  countryId          String
  componentType      EconomicComponentType
  effectivenessScore Float                 @default(50)
  implementationDate DateTime              @default(now())
  implementationCost Float                 @default(0)
  maintenanceCost    Float                 @default(0)
  requiredCapacity   Float                 @default(50)
  isActive           Boolean               @default(true)
  notes              String?
  createdAt          DateTime              @default(now())
  updatedAt          DateTime              @updatedAt
  country            Country               @relation("CountryEconomicComponents", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([componentType])
  @@index([isActive])
}

model TaxComponent {
  id                 String           @id @default(cuid())
  countryId          String
  componentType      TaxComponentType
  effectivenessScore Float            @default(50)
  implementationDate DateTime         @default(now())
  implementationCost Float            @default(0)
  maintenanceCost    Float            @default(0)
  requiredCapacity   Float            @default(50)
  isActive           Boolean          @default(true)
  notes              String?
  createdAt          DateTime         @default(now())
  updatedAt          DateTime         @updatedAt
  country            Country          @relation("CountryTaxComponents", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([componentType])
  @@index([isActive])
}

model ComponentChangeLog {
  id            String   @id @default(cuid())
  countryId     String
  componentType String
  componentId   String
  changeType    String
  previousValue String?
  newValue      String?
  triggeredBy   String?
  timestamp     DateTime @default(now())
  description   String?
  country       Country  @relation("CountryComponentChanges", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([componentType])
  @@index([changeType])
  @@index([timestamp])
}

model CrossBuilderSynergy {
  id                   String   @id @default(cuid())
  countryId            String
  governmentComponents String
  economicComponents   String
  taxComponents        String
  synergyType          String
  effectivenessBonus   Float    @default(0)
  description          String?
  isActive             Boolean  @default(true)
  discoveredAt         DateTime @default(now())
  createdAt            DateTime @default(now())
  country              Country  @relation("CountryCrossBuilderSynergies", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([synergyType])
  @@index([isActive])
}

model BudgetScenario {
  id          String                   @id @default(cuid())
  countryId   String
  name        String
  description String?
  totalBudget Float
  assumptions String?
  riskLevel   String
  feasibility Float                    @default(50)
  isActive    Boolean                  @default(true)
  createdAt   DateTime                 @default(now())
  updatedAt   DateTime                 @updatedAt
  country     Country                  @relation("CountryBudgetScenarios", fields: [countryId], references: [id], onDelete: Cascade)
  categories  BudgetScenarioCategory[]

  @@index([countryId])
  @@index([isActive])
}

model BudgetScenarioCategory {
  id               String              @id @default(cuid())
  scenarioId       String
  categoryName     String
  allocatedAmount  Float
  allocatedPercent Float
  priority         BudgetPriorityLevel @default(medium)
  efficiency       Float               @default(50)
  performance      Float               @default(50)
  createdAt        DateTime            @default(now())
  scenario         BudgetScenario      @relation(fields: [scenarioId], references: [id], onDelete: Cascade)

  @@index([scenarioId])
}

model FiscalPolicy {
  id             String    @id @default(cuid())
  countryId      String
  name           String
  policyType     String
  impact         Float
  implementation String
  cost           Float
  benefits       Float
  description    String?
  isActive       Boolean   @default(true)
  appliedDate    DateTime?
  expiryDate     DateTime?
  measuredImpact Float?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  country        Country   @relation("CountryFiscalPolicies", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([policyType])
  @@index([isActive])
}

model AtomicEffectiveness {
  id                  String   @id @default(cuid())
  countryId           String   @unique
  overallScore        Float
  taxEffectiveness    Float
  economicPolicyScore Float
  stabilityScore      Float
  legitimacyScore     Float
  componentCount      Int      @default(0)
  synergyBonus        Float    @default(0)
  conflictPenalty     Float    @default(0)
  lastCalculated      DateTime @default(now())
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  country             Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([overallScore])
  @@index([lastCalculated])
}

model AtomicEconomicImpact {
  id               String        @id @default(cuid())
  countryId        String
  componentType    ComponentType
  economicMetric   String
  impactMultiplier Float
  effectiveDate    DateTime      @default(now())
  isActive         Boolean       @default(true)
  createdAt        DateTime      @default(now())
  country          Country       @relation("AtomicEconomicImpacts", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([componentType])
  @@index([economicMetric])
  @@index([effectiveDate])
  @@index([isActive])
}

model ThinkpagesAccount {
  id               String           @id @default(cuid())
  clerkUserId      String
  countryId        String
  accountType      String
  username         String           @unique
  displayName      String
  firstName        String
  lastName         String
  bio              String?
  profileImageUrl  String?
  verified         Boolean          @default(false)
  followerCount    Int              @default(0)
  followingCount   Int              @default(0)
  postCount        Int              @default(0)
  postingFrequency String           @default("moderate")
  politicalLean    String           @default("center")
  personality      String           @default("casual")
  isActive         Boolean          @default(true)
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt
  mentions         PostMention[]
  reactions        PostReaction[]
  country          Country          @relation("ThinkpagesAccounts", fields: [countryId], references: [id], onDelete: Cascade)
  posts            ThinkpagesPost[]

  @@index([clerkUserId])
  @@index([countryId])
  @@index([accountType])
  @@index([username])
}

model ThinkpagesPost {
  id               String            @id @default(cuid())
  accountId        String
  content          String
  hashtags         String?
  visualizations   String?
  postType         String            @default("original")
  parentPostId     String?
  repostOfId       String?
  likeCount        Int               @default(0)
  repostCount      Int               @default(0)
  replyCount       Int               @default(0)
  impressions      Int               @default(0)
  reactionCounts   String?
  trending         Boolean           @default(false)
  pinned           Boolean           @default(false)
  visibility       String            @default("public")
  ixTimeTimestamp  DateTime
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  mediaAttachments MediaAttachment[]
  mentions         PostMention[]
  reactions        PostReaction[]
  account          ThinkpagesAccount @relation(fields: [accountId], references: [id], onDelete: Cascade)
  parentPost       ThinkpagesPost?   @relation("PostReplies", fields: [parentPostId], references: [id])
  replies          ThinkpagesPost[]  @relation("PostReplies")
  repostOf         ThinkpagesPost?   @relation("PostReposts", fields: [repostOfId], references: [id])
  reposts          ThinkpagesPost[]  @relation("PostReposts")

  @@index([accountId])
  @@index([ixTimeTimestamp])
  @@index([trending])
  @@index([visibility])
  @@index([postType])
  @@index([parentPostId])
}

model PostReaction {
  id           String            @id @default(cuid())
  postId       String
  accountId    String
  reactionType String
  timestamp    DateTime          @default(now())
  account      ThinkpagesAccount @relation(fields: [accountId], references: [id], onDelete: Cascade)
  post         ThinkpagesPost    @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@unique([postId, accountId])
  @@index([postId])
  @@index([accountId])
  @@index([reactionType])
}

model PostMention {
  id                 String            @id @default(cuid())
  postId             String
  mentionedAccountId String
  position           Int
  mentionedAccount   ThinkpagesAccount @relation(fields: [mentionedAccountId], references: [id], onDelete: Cascade)
  post               ThinkpagesPost    @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@index([postId])
  @@index([mentionedAccountId])
}

model MediaAttachment {
  id        String         @id @default(cuid())
  postId    String
  type      String
  url       String
  filename  String?
  fileSize  Int?
  mimeType  String?
  createdAt DateTime       @default(now())
  post      ThinkpagesPost @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@index([postId])
  @@index([type])
}

model TrendingTopic {
  id            String   @id @default(cuid())
  hashtag       String   @unique
  postCount     Int      @default(0)
  engagement    Int      @default(0)
  region        String?
  peakTimestamp DateTime
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([hashtag])
  @@index([postCount])
  @@index([engagement])
  @@index([isActive])
}

model CountryMoodMetric {
  id             String   @id @default(cuid())
  countryId      String
  timestamp      DateTime
  sentimentScore Float
  postCount      Int      @default(0)
  country        Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)

  @@unique([countryId, timestamp])
  @@index([countryId])
  @@index([timestamp])
}

model ThinktankGroup {
  id                String             @id @default(cuid())
  name              String
  description       String?
  avatar            String?
  type              String             @default("public")
  category          String?
  tags              String?
  memberCount       Int                @default(0)
  createdBy         String
  isActive          Boolean            @default(true)
  settings          String?
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  collaborativeDocs CollaborativeDoc[]
  invites           ThinktankInvite[]
  members           ThinktankMember[]
  messages          ThinktankMessage[]

  @@index([type])
  @@index([category])
  @@index([createdBy])
  @@index([isActive])
}

model ThinktankMember {
  id          String         @id @default(cuid())
  groupId     String
  userId      String
  role        String         @default("member")
  joinedAt    DateTime       @default(now())
  isActive    Boolean        @default(true)
  permissions String?
  group       ThinktankGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)

  @@unique([groupId, userId])
  @@index([groupId])
  @@index([userId])
  @@index([role])
}

model ThinktankMessage {
  id              String               @id @default(cuid())
  groupId         String
  userId          String
  content         String
  messageType     String               @default("text")
  replyToId       String?
  editedAt        DateTime?
  deletedAt       DateTime?
  reactions       String?
  mentions        String?
  attachments     String?
  ixTimeTimestamp DateTime             @default(now())
  readReceipts    MessageReadReceipt[]
  group           ThinktankGroup       @relation(fields: [groupId], references: [id], onDelete: Cascade)
  replyTo         ThinktankMessage?    @relation("MessageReplies", fields: [replyToId], references: [id])
  replies         ThinktankMessage[]   @relation("MessageReplies")

  @@index([groupId])
  @@index([userId])
  @@index([ixTimeTimestamp])
  @@index([messageType])
}

model ThinktankInvite {
  id          String         @id @default(cuid())
  groupId     String
  invitedBy   String
  invitedUser String?
  inviteCode  String?
  expiresAt   DateTime?
  isUsed      Boolean        @default(false)
  createdAt   DateTime       @default(now())
  group       ThinktankGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)

  @@index([groupId])
  @@index([invitedBy])
  @@index([inviteCode])
}

model CollaborativeDoc {
  id         String         @id @default(cuid())
  groupId    String
  title      String
  content    String?
  version    Int            @default(1)
  createdBy  String
  lastEditBy String?
  isPublic   Boolean        @default(false)
  createdAt  DateTime       @default(now())
  updatedAt  DateTime       @updatedAt
  group      ThinktankGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)

  @@index([groupId])
  @@index([createdBy])
  @@index([isPublic])
}

model ThinkshareConversation {
  id                       String                    @id @default(cuid())
  type                     String                    @default("direct")
  name                     String?
  avatar                   String?
  isActive                 Boolean                   @default(true)
  lastActivity             DateTime                  @default(now())
  createdAt                DateTime                  @default(now())
  updatedAt                DateTime                  @updatedAt
  conversationType         String?
  diplomaticClassification String?
  priority                 String?
  encrypted                Boolean                   @default(false)
  channelType              String?
  participants             ConversationParticipant[]
  messages                 ThinkshareMessage[]

  @@index([type])
  @@index([lastActivity])
  @@index([isActive])
  @@index([conversationType])
  @@index([diplomaticClassification])
}

model ConversationParticipant {
  id                   String                 @id @default(cuid())
  conversationId       String
  userId               String
  joinedAt             DateTime               @default(now())
  leftAt               DateTime?
  isActive             Boolean                @default(true)
  role                 String                 @default("participant")
  lastReadAt           DateTime               @default(now())
  notificationSettings String?
  conversation         ThinkshareConversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@unique([conversationId, userId])
  @@index([conversationId])
  @@index([userId])
}

model ThinkshareMessage {
  id               String                 @id @default(cuid())
  conversationId   String
  userId           String
  content          String
  messageType      String                 @default("text")
  replyToId        String?
  editedAt         DateTime?
  deletedAt        DateTime?
  reactions        String?
  mentions         String?
  attachments      String?
  isSystem         Boolean                @default(false)
  ixTimeTimestamp  DateTime               @default(now())
  classification   String?
  priority         String?
  subject          String?
  signature        String?
  encryptedContent String?
  status           String?
  readReceipts     MessageReadReceipt[]
  conversation     ThinkshareConversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  replyTo          ThinkshareMessage?     @relation("ThinkshareReplies", fields: [replyToId], references: [id])
  replies          ThinkshareMessage[]    @relation("ThinkshareReplies")

  @@index([conversationId])
  @@index([userId])
  @@index([ixTimeTimestamp])
  @@index([messageType])
  @@index([classification])
  @@index([priority])
  @@index([status])
}

model MessageReadReceipt {
  id                  String             @id @default(cuid())
  messageId           String
  userId              String
  readAt              DateTime           @default(now())
  messageType         String
  thinkshareMessageId String?
  ThinkshareMessage   ThinkshareMessage? @relation(fields: [thinkshareMessageId], references: [id])
  thinktankMessage    ThinktankMessage   @relation(fields: [messageId], references: [id], onDelete: Cascade, map: "MessageReadReceipt_thinktankMessageId_fkey")

  @@unique([messageId, userId])
  @@index([messageId])
  @@index([userId])
  @@index([messageType])
}

model UserPresence {
  id           String   @id @default(cuid())
  userId       String   @unique
  isOnline     Boolean  @default(false)
  lastSeen     DateTime @default(now())
  status       String   @default("available")
  customStatus String?
  updatedAt    DateTime @updatedAt

  @@index([isOnline])
  @@index([lastSeen])
}

model ArchetypeCategory {
  id            String      @id @default(cuid())
  name          String      @unique
  description   String
  color         String
  maxSelectable Int         @default(2)
  priority      Int         @default(0)
  isActive      Boolean     @default(true)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  archetypes    Archetype[]

  @@index([priority])
  @@index([isActive])
}

model Archetype {
  id             String                   @id @default(cuid())
  name           String                   @unique
  description    String
  categoryId     String
  iconName       String
  color          String
  gradient       String
  priority       Int                      @default(0)
  isSelectable   Boolean                  @default(true)
  isActive       Boolean                  @default(true)
  tags           String?
  filterRules    String
  createdAt      DateTime                 @default(now())
  updatedAt      DateTime                 @updatedAt
  category       ArchetypeCategory        @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  countryMatches CountryArchetypeMatch[]
  userSelections UserArchetypeSelection[]

  @@index([categoryId])
  @@index([priority])
  @@index([isSelectable])
  @@index([isActive])
}

model UserArchetypeSelection {
  id          String    @id @default(cuid())
  userId      String
  archetypeId String
  selectedAt  DateTime  @default(now())
  archetype   Archetype @relation(fields: [archetypeId], references: [id], onDelete: Cascade)
  user        User      @relation("UserArchetypes", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, archetypeId])
  @@index([userId])
  @@index([archetypeId])
}

model CountryArchetypeMatch {
  id          String    @id @default(cuid())
  countryId   String
  archetypeId String
  matchScore  Float     @default(1.0)
  lastChecked DateTime  @default(now())
  archetype   Archetype @relation(fields: [archetypeId], references: [id], onDelete: Cascade)
  country     Country   @relation("CountryArchetypes", fields: [countryId], references: [id], onDelete: Cascade)

  @@unique([countryId, archetypeId])
  @@index([countryId])
  @@index([archetypeId])
  @@index([matchScore])
}

model NationalIdentity {
  id                   String   @id @default(cuid())
  countryId            String   @unique
  countryName          String?
  officialName         String?
  governmentType       String?
  motto                String?
  mottoNative          String?
  capitalCity          String?
  largestCity          String?
  demonym              String?
  currency             String?
  currencySymbol       String?
  officialLanguages    String?
  nationalLanguage     String?
  nationalAnthem       String?
  nationalReligion     String?
  nationalDay          String?
  callingCode          String?
  internetTLD          String?
  drivingSide          String?
  timeZone             String?
  isoCode              String?
  coordinatesLatitude  String?
  coordinatesLongitude String?
  emergencyNumber      String?
  postalCodeFormat     String?
  nationalSport        String?
  weekStartDay         String?
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  country              Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
}

model PostBookmark {
  id        String   @id @default(cuid())
  userId    String
  postId    String
  createdAt DateTime @default(now())

  @@unique([userId, postId])
}

model PostFlag {
  id        String   @id @default(cuid())
  userId    String
  postId    String
  reason    String?
  createdAt DateTime @default(now())

  @@unique([userId, postId])
}

model ActivityFeed {
  id               String            @id @default(cuid())
  type             String
  category         String            @default("game")
  userId           String?
  countryId        String?
  title            String
  description      String
  metadata         String?
  priority         Priority          @default(medium)
  visibility       String            @default("public")
  relatedCountries String?
  likes            Int               @default(0)
  comments         Int               @default(0)
  shares           Int               @default(0)
  views            Int               @default(0)
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  activityComments ActivityComment[]
  activityLikes    ActivityLike[]
  activityShares   ActivityShare[]

  @@index([type])
  @@index([category])
  @@index([userId])
  @@index([countryId])
  @@index([priority])
  @@index([createdAt])
  @@index([visibility])
}

model ActivityLike {
  id         String       @id @default(cuid())
  activityId String
  userId     String
  createdAt  DateTime     @default(now())
  activity   ActivityFeed @relation(fields: [activityId], references: [id], onDelete: Cascade)

  @@unique([activityId, userId])
  @@index([activityId])
  @@index([userId])
}

model ActivityComment {
  id         String       @id @default(cuid())
  activityId String
  userId     String
  content    String
  createdAt  DateTime     @default(now())
  updatedAt  DateTime     @updatedAt
  activity   ActivityFeed @relation(fields: [activityId], references: [id], onDelete: Cascade)

  @@index([activityId])
  @@index([userId])
  @@index([createdAt])
}

model ActivityShare {
  id         String       @id @default(cuid())
  activityId String
  userId     String
  createdAt  DateTime     @default(now())
  activity   ActivityFeed @relation(fields: [activityId], references: [id], onDelete: Cascade)

  @@unique([activityId, userId])
  @@index([activityId])
  @@index([userId])
}

model DiplomaticEvent {
  id                 String   @id @default(cuid())
  country1Id         String
  country2Id         String?
  eventType          String
  title              String
  description        String
  tradeValue         Float?
  status             String   @default("active")
  metadata           String?
  embassyId          String?
  missionId          String?
  severity           String   @default("info")
  relationshipImpact Float    @default(0)
  reputationImpact   Float    @default(0)
  economicImpact     Float    @default(0)
  ixTimeTimestamp    Float?
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@index([country1Id])
  @@index([country2Id])
  @@index([eventType])
  @@index([embassyId])
  @@index([createdAt])
}

model UserConnection {
  id              String   @id @default(cuid())
  userId          String
  targetUserId    String?
  targetCountryId String?
  connectionType  String
  status          String   @default("active")
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@unique([userId, targetUserId, connectionType])
  @@unique([userId, targetCountryId, connectionType])
  @@index([userId])
  @@index([targetUserId])
  @@index([targetCountryId])
  @@index([connectionType])
}

model UserAchievement {
  id            String   @id @default(cuid())
  userId        String
  achievementId String
  title         String
  description   String
  category      String
  rarity        String
  iconUrl       String?
  metadata      String?
  unlockedAt    DateTime @default(now())

  @@index([userId])
  @@index([category])
  @@index([rarity])
  @@index([unlockedAt])
}

model CountryActivity {
  id        String   @id @default(cuid())
  countryId String
  type      String
  data      String
  timestamp DateTime @default(now())

  @@index([countryId])
  @@index([type])
  @@index([timestamp])
}

model DiplomaticAction {
  id            String   @id @default(cuid())
  fromCountryId String
  toCountryId   String
  actionType    String
  description   String?
  status        String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([fromCountryId])
  @@index([toCountryId])
}

model Embassy {
  id                  String                  @id @default(cuid())
  hostCountryId       String
  guestCountryId      String
  name                String
  location            String?
  ambassadorName      String?
  staffCount          Int                     @default(1)
  establishedAt       DateTime                @default(now())
  status              String                  @default("active")
  services            String?
  securityLevel       String                  @default("STANDARD")
  establishmentCost   Float                   @default(0)
  maintenanceCost     Float                   @default(1000)
  lastMaintenancePaid DateTime                @default(now())
  budget              Float                   @default(50000)
  level               Int                     @default(1)
  experience          Int                     @default(0)
  upgradeProgress     Float                   @default(0)
  influence           Float                   @default(10)
  effectiveness       Float                   @default(50)
  reputation          Float                   @default(50)
  maxStaff            Int                     @default(5)
  currentMissions     Int                     @default(0)
  maxMissions         Int                     @default(2)
  specialization      String?
  specializationLevel Int                     @default(0)
  buffs               String?
  debuffs             String?
  lastActivity        DateTime                @default(now())
  createdAt           DateTime                @default(now())
  updatedAt           DateTime                @updatedAt
  description         String?
  strategicPriorities String?
  partnershipGoals    String?
  keyAchievements     String?
  optionUsage         DiplomaticOptionUsage[]
  guestCountry        Country                 @relation("GuestCountryEmbassies", fields: [guestCountryId], references: [id], onDelete: Cascade)
  hostCountry         Country                 @relation("HostCountryEmbassies", fields: [hostCountryId], references: [id], onDelete: Cascade)
  missions            EmbassyMission[]
  upgrades            EmbassyUpgrade[]

  @@unique([hostCountryId, guestCountryId])
  @@index([hostCountryId])
  @@index([guestCountryId])
  @@index([status])
  @@index([level])
  @@index([specialization])
}

model DiplomaticChannel {
  id             String                         @id @default(cuid())
  name           String
  type           String
  classification String                         @default("PUBLIC")
  encrypted      Boolean                        @default(false)
  lastActivity   DateTime                       @default(now())
  createdAt      DateTime                       @default(now())
  updatedAt      DateTime                       @updatedAt
  participants   DiplomaticChannelParticipant[]
  messages       DiplomaticMessage[]

  @@index([type])
  @@index([classification])
  @@index([lastActivity])
}

model DiplomaticChannelParticipant {
  id          String            @id @default(cuid())
  channelId   String
  countryId   String
  countryName String
  flagUrl     String?
  role        String            @default("MEMBER")
  joinedAt    DateTime          @default(now())
  channel     DiplomaticChannel @relation(fields: [channelId], references: [id], onDelete: Cascade)

  @@unique([channelId, countryId])
  @@index([channelId])
  @@index([countryId])
}

model DiplomaticMessage {
  id                String            @id @default(cuid())
  channelId         String
  fromCountryId     String
  fromCountryName   String
  toCountryId       String?
  toCountryName     String?
  subject           String?
  content           String
  classification    String            @default("PUBLIC")
  priority          String            @default("NORMAL")
  status            String            @default("SENT")
  encrypted         Boolean           @default(false)
  ixTimeTimestamp   Float
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  encryptedContent  String?
  signature         String?
  encryptionVersion String?
  iv                String?
  encryptedKey      String?
  senderKeyId       String?
  signatureVerified Boolean           @default(false)
  channel           DiplomaticChannel @relation(fields: [channelId], references: [id], onDelete: Cascade)

  @@index([channelId])
  @@index([fromCountryId])
  @@index([toCountryId])
  @@index([classification])
  @@index([priority])
  @@index([status])
  @@index([ixTimeTimestamp])
}

model CulturalExchange {
  id                      String                        @id @default(cuid())
  title                   String
  type                    String
  description             String
  narrative               String?
  objectives              String?
  isPublic                Boolean                       @default(true)
  maxParticipants         Int?
  hostCountryId           String
  hostCountryName         String
  hostCountryFlag         String?
  status                  String                        @default("planning")
  startDate               DateTime
  endDate                 DateTime
  ixTimeContext           Float
  participants            Int                           @default(0)
  culturalImpact          Float                         @default(0)
  diplomaticValue         Float                         @default(0)
  socialEngagement        Int                           @default(0)
  achievements            String?
  createdAt               DateTime                      @default(now())
  updatedAt               DateTime                      @updatedAt
  scenarioType            String?
  scenarioId              String?
  markovStateImpact       String?
  npcResponses            String?
  predictedOutcome        String?
  participantSatisfaction Float                         @default(50)
  publicPerception        Float                         @default(50)
  economicCost            Float                         @default(0)
  culturalBonusDelta      Float                         @default(0)
  diplomaticBonusDelta    Float                         @default(0)
  culturalArtifacts       CulturalArtifact[]
  scenario                CulturalScenario?             @relation(fields: [scenarioId], references: [id])
  outcomes                CulturalExchangeOutcome[]
  participatingCountries  CulturalExchangeParticipant[]
  votes                   CulturalExchangeVote[]
  embassyMissions         EmbassyMission[]

  @@index([hostCountryId])
  @@index([type])
  @@index([status])
  @@index([startDate])
  @@index([scenarioType])
  @@index([scenarioId])
}

model CulturalExchangeParticipant {
  id                      String           @id @default(cuid())
  exchangeId              String
  countryId               String
  countryName             String
  flagUrl                 String?
  role                    String
  joinedAt                DateTime         @default(now())
  isNPC                   Boolean          @default(false)
  enthusiasmLevel         Float?
  resourceCommitment      Float?
  participationDecision   String?
  npcPersonalityArchetype String?
  exchange                CulturalExchange @relation(fields: [exchangeId], references: [id], onDelete: Cascade)

  @@unique([exchangeId, countryId])
  @@index([exchangeId])
  @@index([countryId])
}

model CulturalArtifact {
  id           String           @id @default(cuid())
  exchangeId   String
  type         String
  title        String
  description  String?
  thumbnailUrl String?
  fileUrl      String?
  contributor  String
  countryId    String
  uploadedAt   DateTime         @default(now())
  exchange     CulturalExchange @relation(fields: [exchangeId], references: [id], onDelete: Cascade)

  @@index([exchangeId])
  @@index([countryId])
  @@index([type])
}

model CulturalScenario {
  id                     String             @id @default(cuid())
  type                   String
  title                  String
  narrative              String
  country1Id             String
  country2Id             String
  country1Name           String
  country2Name           String
  relationshipState      String
  relationshipStrength   Float
  responseOptions        String
  tags                   String
  culturalImpact         Float
  diplomaticRisk         Float
  economicCost           Float
  status                 String             @default("active")
  createdAt              DateTime           @default(now())
  expiresAt              DateTime
  resolvedAt             DateTime?
  chosenOption           String?
  actualCulturalImpact   Float?
  actualDiplomaticImpact Float?
  actualEconomicCost     Float?
  outcomeNotes           String?
  relatedExchanges       CulturalExchange[]

  @@index([country1Id])
  @@index([country2Id])
  @@index([type])
  @@index([status])
  @@index([createdAt])
  @@index([expiresAt])
}

model CulturalExchangeOutcome {
  id                        String           @id @default(cuid())
  exchangeId                String
  countryId                 String
  responseChoice            String
  culturalImpactChange      Float
  diplomaticChange          Float
  economicCostActual        Float
  participantSatisfaction   Float
  publicPerception          Float
  relationshipStateBefore   String
  relationshipStateAfter    String
  stateChanged              Boolean
  transitionProbability     Float
  relationshipStrengthDelta Float
  culturalBonusDelta        Float
  diplomaticBonusDelta      Float
  culturalTiesStrength      Float
  softPowerGain             Float
  peopleTopeopleBonds       Float
  impactReasoning           String
  createdAt                 DateTime         @default(now())
  exchange                  CulturalExchange @relation(fields: [exchangeId], references: [id], onDelete: Cascade)

  @@index([exchangeId])
  @@index([countryId])
  @@index([createdAt])
}

model CulturalExchangeVote {
  id          String           @id @default(cuid())
  exchangeId  String
  countryId   String
  countryName String
  vote        String
  comment     String?
  votedAt     DateTime         @default(now())
  exchange    CulturalExchange @relation(fields: [exchangeId], references: [id], onDelete: Cascade)

  @@unique([exchangeId, countryId])
  @@index([exchangeId])
  @@index([countryId])
  @@index([vote])
}

model EmbassyMission {
  id                     String            @id @default(cuid())
  embassyId              String
  name                   String
  type                   String
  description            String
  difficulty             String
  status                 String            @default("active")
  requiredStaff          Int               @default(1)
  requiredLevel          Int               @default(1)
  requiredSpecialization String?
  cost                   Float             @default(0)
  duration               Int               @default(7)
  startedAt              DateTime          @default(now())
  completesAt            DateTime
  experienceReward       Int               @default(0)
  influenceReward        Float             @default(0)
  reputationReward       Float             @default(0)
  economicReward         Float             @default(0)
  progress               Float             @default(0)
  successChance          Float             @default(50)
  complications          String?
  ixTimeStarted          Float
  ixTimeCompletes        Float
  culturalExchangeId     String?
  createdAt              DateTime          @default(now())
  updatedAt              DateTime          @updatedAt
  culturalExchange       CulturalExchange? @relation(fields: [culturalExchangeId], references: [id])
  embassy                Embassy           @relation(fields: [embassyId], references: [id], onDelete: Cascade)

  @@index([embassyId])
  @@index([type])
  @@index([status])
  @@index([completesAt])
  @@index([culturalExchangeId])
}

model EmbassyUpgrade {
  id            String    @id @default(cuid())
  embassyId     String
  upgradeType   String
  name          String
  description   String
  level         Int       @default(1)
  cost          Float
  duration      Int
  requiredLevel Int       @default(1)
  status        String    @default("available")
  startedAt     DateTime?
  completesAt   DateTime?
  progress      Float     @default(0)
  effects       String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  embassy       Embassy   @relation(fields: [embassyId], references: [id], onDelete: Cascade)

  @@index([embassyId])
  @@index([upgradeType])
  @@index([status])
}

model EmbassyRequirement {
  id                     String   @id @default(cuid())
  hostCountryId          String   @unique
  requiredRelationship   String   @default("neutral")
  minRelationStrength    Int      @default(25)
  establishmentCost      Float    @default(100000)
  approvalTime           Int      @default(30)
  specialRequirements    String?
  economicTierMultiplier Float    @default(1.0)
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt

  @@index([hostCountryId])
}

model DiplomaticOption {
  id          String                  @id @default(cuid())
  type        String
  value       String
  category    String?
  description String?
  sortOrder   Int                     @default(0)
  isActive    Boolean                 @default(true)
  createdAt   DateTime                @default(now())
  updatedAt   DateTime                @updatedAt
  usage       DiplomaticOptionUsage[]

  @@unique([type, value])
  @@index([type, isActive])
  @@index([category])
}

model DiplomaticOptionUsage {
  id         String           @id @default(cuid())
  optionId   String
  embassyId  String
  selectedAt DateTime         @default(now())
  removedAt  DateTime?
  embassy    Embassy          @relation(fields: [embassyId], references: [id], onDelete: Cascade)
  option     DiplomaticOption @relation(fields: [optionId], references: [id], onDelete: Cascade)

  @@index([optionId])
  @@index([embassyId])
  @@index([selectedAt])
}

model Role {
  id              String           @id @default(cuid())
  name            String           @unique
  displayName     String
  description     String?
  level           Int              @unique
  isSystem        Boolean          @default(false)
  isActive        Boolean          @default(true)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  rolePermissions RolePermission[]
  users           User[]

  @@index([name])
  @@index([level])
  @@index([isActive])
  @@index([isSystem])
}

model Permission {
  id              String           @id @default(cuid())
  name            String           @unique
  displayName     String
  description     String?
  category        String
  isSystem        Boolean          @default(false)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  rolePermissions RolePermission[]

  @@index([name])
  @@index([category])
  @@index([isSystem])
}

model RolePermission {
  id           String     @id @default(cuid())
  roleId       String
  permissionId String
  createdAt    DateTime   @default(now())
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)
  role         Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([roleId, permissionId])
  @@index([roleId])
  @@index([permissionId])
}

model UserSession {
  id           String   @id @default(cuid())
  clerkUserId  String
  roleId       String?
  permissions  String?
  ipAddress    String?
  userAgent    String?
  lastActivity DateTime @default(now())
  expiresAt    DateTime
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())

  @@index([clerkUserId])
  @@index([roleId])
  @@index([lastActivity])
  @@index([isActive])
  @@index([expiresAt])
}

model AuditLog {
  id         String   @id @default(cuid())
  userId     String?
  action     String
  target     String?
  details    String?
  ipAddress  String?
  userAgent  String?
  success    Boolean  @default(true)
  error      String?
  timestamp  DateTime @default(now())
  entityType String?

  @@index([userId])
  @@index([action])
  @@index([timestamp])
  @@index([success])
}

model GovernmentStructure {
  id                      String                 @id @default(cuid())
  countryId               String                 @unique
  governmentName          String
  governmentType          String
  headOfState             String?
  headOfGovernment        String?
  legislatureName         String?
  executiveName           String?
  judicialName            String?
  totalBudget             Float                  @default(0)
  fiscalYear              String                 @default("Calendar Year")
  budgetCurrency          String                 @default("USD")
  politicalStability      Float?                 @default(0.5)
  politicalPolarization   Float?                 @default(50)
  democracyIndex          Float?                 @default(50)
  electionCycle           Int?                   @default(4)
  governmentEffectiveness Float?                 @default(50)
  ruleOfLaw               Float?                 @default(50)
  corruptionIndex         Float?                 @default(50)
  politicalMetricsUpdated DateTime?
  createdAt               DateTime               @default(now())
  updatedAt               DateTime               @updatedAt
  budgetAllocations       BudgetAllocation[]
  departments             GovernmentDepartment[]
  officials               GovernmentOfficial[]
  country                 Country                @relation(fields: [countryId], references: [id], onDelete: Cascade)
  revenueSources          RevenueSource[]

  @@index([countryId])
}

model GovernmentDepartment {
  id                    String                 @id @default(cuid())
  governmentStructureId String
  name                  String
  shortName             String?
  category              String
  description           String?
  minister              String?
  ministerTitle         String                 @default("Minister")
  headquarters          String?
  established           String?
  employeeCount         Int?
  icon                  String?
  color                 String                 @default("#6366f1")
  priority              Int                    @default(50)
  isActive              Boolean                @default(true)
  parentDepartmentId    String?
  organizationalLevel   String                 @default("Ministry")
  functions             String?
  kpis                  String?
  createdAt             DateTime               @default(now())
  updatedAt             DateTime               @updatedAt
  budgetAllocations     BudgetAllocation[]
  governmentStructure   GovernmentStructure    @relation(fields: [governmentStructureId], references: [id], onDelete: Cascade)
  parentDepartment      GovernmentDepartment?  @relation("DepartmentHierarchy", fields: [parentDepartmentId], references: [id])
  subDepartments        GovernmentDepartment[] @relation("DepartmentHierarchy")
  officials             GovernmentOfficial[]
  subBudgets            SubBudgetCategory[]

  @@index([governmentStructureId])
  @@index([category])
  @@index([parentDepartmentId])
  @@index([isActive])
}

model BudgetAllocation {
  id                    String               @id @default(cuid())
  governmentStructureId String
  departmentId          String
  budgetYear            Int
  allocatedAmount       Float
  allocatedPercent      Float
  spentAmount           Float                @default(0)
  encumberedAmount      Float                @default(0)
  availableAmount       Float                @default(0)
  budgetStatus          String               @default("Allocated")
  lastReviewed          DateTime             @default(now())
  notes                 String?
  createdAt             DateTime             @default(now())
  updatedAt             DateTime             @updatedAt
  department            GovernmentDepartment @relation(fields: [departmentId], references: [id], onDelete: Cascade)
  governmentStructure   GovernmentStructure  @relation(fields: [governmentStructureId], references: [id], onDelete: Cascade)

  @@unique([departmentId, budgetYear])
  @@index([governmentStructureId])
  @@index([departmentId])
  @@index([budgetYear])
}

model SubBudgetCategory {
  id           String               @id @default(cuid())
  departmentId String
  name         String
  description  String?
  amount       Float
  percent      Float
  budgetType   String
  isRecurring  Boolean              @default(true)
  priority     String               @default("Medium")
  createdAt    DateTime             @default(now())
  updatedAt    DateTime             @updatedAt
  department   GovernmentDepartment @relation(fields: [departmentId], references: [id], onDelete: Cascade)

  @@index([departmentId])
  @@index([budgetType])
}

model RevenueSource {
  id                    String              @id @default(cuid())
  governmentStructureId String
  name                  String
  category              String
  description           String?
  rate                  Float?
  revenueAmount         Float               @default(0)
  revenuePercent        Float               @default(0)
  isActive              Boolean             @default(true)
  collectionMethod      String?
  administeredBy        String?
  createdAt             DateTime            @default(now())
  updatedAt             DateTime            @updatedAt
  governmentStructure   GovernmentStructure @relation(fields: [governmentStructureId], references: [id], onDelete: Cascade)

  @@index([governmentStructureId])
  @@index([category])
  @@index([isActive])
}

model AdminFavorite {
  id          String   @id @default(cuid())
  userId      String
  panelType   String
  panelId     String
  displayName String
  description String?
  iconName    String?
  url         String
  category    String   @default("general")
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([userId, panelId])
  @@index([userId])
  @@index([category])
  @@index([isActive])
  @@index([order])
}

model GovernmentOfficial {
  id                    String                @id @default(cuid())
  governmentStructureId String?
  departmentId          String?
  name                  String
  title                 String
  role                  String
  email                 String?
  phone                 String?
  bio                   String?
  photoUrl              String?
  appointedDate         DateTime              @default(now())
  termEndDate           DateTime?
  isActive              Boolean               @default(true)
  priority              Int                   @default(50)
  responsibilities      String?
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt
  department            GovernmentDepartment? @relation(fields: [departmentId], references: [id], onDelete: Cascade)
  governmentStructure   GovernmentStructure?  @relation(fields: [governmentStructureId], references: [id], onDelete: Cascade)
  meetingAttendances    MeetingAttendance[]

  @@index([governmentStructureId])
  @@index([departmentId])
  @@index([isActive])
  @@index([role])
}

model CabinetMeeting {
  id              String              @id @default(cuid())
  countryId       String
  userId          String
  title           String
  description     String?
  scheduledDate   DateTime
  scheduledIxTime Float?
  duration        Int                 @default(60)
  status          String              @default("scheduled")
  notes           String?
  createdAt       DateTime            @default(now())
  updatedAt       DateTime            @updatedAt
  completedAt     DateTime?
  actionItems     MeetingActionItem[]
  agendaItems     MeetingAgendaItem[]
  attendances     MeetingAttendance[]
  decisions       MeetingDecision[]

  @@index([countryId])
  @@index([userId])
  @@index([scheduledDate])
  @@index([scheduledIxTime])
  @@index([status])
}

model MeetingAttendance {
  id               String              @id @default(cuid())
  meetingId        String
  officialId       String?
  attendeeName     String
  attendeeRole     String?
  attendanceStatus String              @default("invited")
  notes            String?
  createdAt        DateTime            @default(now())
  meeting          CabinetMeeting      @relation(fields: [meetingId], references: [id], onDelete: Cascade)
  official         GovernmentOfficial? @relation(fields: [officialId], references: [id])

  @@index([meetingId])
  @@index([officialId])
  @@index([attendanceStatus])
}

model MeetingAgendaItem {
  id             String         @id @default(cuid())
  meetingId      String
  title          String
  description    String?
  order          Int            @default(0)
  duration       Int?
  category       String?
  tags           String?
  relatedMetrics String?
  presenter      String?
  status         String         @default("pending")
  outcome        String?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
  meeting        CabinetMeeting @relation(fields: [meetingId], references: [id], onDelete: Cascade)

  @@index([meetingId])
  @@index([category])
  @@index([status])
}

model MeetingDecision {
  id                   String         @id @default(cuid())
  meetingId            String
  agendaItemId         String?
  title                String
  description          String
  decisionType         String
  impact               String?
  votingResult         String?
  implementationStatus String         @default("pending")
  relatedPolicyId      String?
  relatedMetrics       String?
  estimatedEffect      String?
  decisionMakers       String?
  createdAt            DateTime       @default(now())
  updatedAt            DateTime       @updatedAt
  meeting              CabinetMeeting @relation(fields: [meetingId], references: [id], onDelete: Cascade)

  @@index([meetingId])
  @@index([agendaItemId])
  @@index([decisionType])
  @@index([implementationStatus])
}

model MeetingActionItem {
  id              String         @id @default(cuid())
  meetingId       String
  agendaItemId    String?
  decisionId      String?
  title           String
  description     String?
  assignedTo      String?
  dueDate         DateTime?
  dueIxTime       Float?
  priority        String         @default("normal")
  status          String         @default("pending")
  category        String?
  tags            String?
  completionNotes String?
  completedAt     DateTime?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  meeting         CabinetMeeting @relation(fields: [meetingId], references: [id], onDelete: Cascade)

  @@index([meetingId])
  @@index([agendaItemId])
  @@index([decisionId])
  @@index([status])
  @@index([priority])
  @@index([dueDate])
}

model Policy {
  id                          String            @id @default(cuid())
  countryId                   String
  userId                      String
  name                        String
  description                 String
  policyType                  String
  category                    String
  status                      String            @default("draft")
  priority                    String            @default("medium")
  objectives                  String?
  targetMetrics               String?
  implementationCost          Float             @default(0)
  maintenanceCost             Float             @default(0)
  estimatedBenefit            String?
  recommendedFor              String?
  requiredTier                String?
  requiredComponents          String?
  conflictsWith               String?
  prerequisitePolicies        String?
  proposedDate                DateTime          @default(now())
  effectiveDate               DateTime?
  expiryDate                  DateTime?
  proposedIxTime              Float?
  effectiveIxTime             Float?
  gdpEffect                   Float             @default(0)
  employmentEffect            Float             @default(0)
  inflationEffect             Float             @default(0)
  taxRevenueEffect            Float             @default(0)
  customEffects               String?
  relatedGovernmentComponents String?
  relatedEconomicComponents   String?
  relatedTaxComponents        String?
  calculatedEffects           String?
  lastRecalculated            DateTime?
  approvalRequired            Boolean           @default(false)
  approvedBy                  String?
  approvedDate                DateTime?
  reviewNotes                 String?
  createdAt                   DateTime          @default(now())
  updatedAt                   DateTime          @updatedAt
  policyEffectLog             PolicyEffectLog[]

  @@index([countryId])
  @@index([userId])
  @@index([policyType])
  @@index([status])
  @@index([effectiveDate])
  @@index([effectiveIxTime])
}

model PolicyEffectLog {
  id            String   @id @default(cuid())
  policyId      String
  appliedAt     DateTime @default(now())
  appliedIxTime Float
  effectType    String
  metricsBefore String?
  metricsAfter  String?
  actualEffect  String?
  notes         String?
  createdAt     DateTime @default(now())
  policy        Policy   @relation(fields: [policyId], references: [id], onDelete: Cascade)

  @@index([policyId])
  @@index([appliedIxTime])
  @@index([effectType])
}

model ActivitySchedule {
  id               String   @id @default(cuid())
  countryId        String
  userId           String
  activityType     String
  title            String
  description      String?
  scheduledDate    DateTime
  scheduledIxTime  Float?
  duration         Int?
  status           String   @default("scheduled")
  priority         String   @default("normal")
  category         String?
  tags             String?
  relatedIds       String?
  recurrence       String?
  reminderSettings String?
  completionNotes  String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([countryId])
  @@index([userId])
  @@index([scheduledDate])
  @@index([scheduledIxTime])
  @@index([activityType])
  @@index([status])
  @@index([priority])
}

model QuickActionTemplate {
  id                String   @id @default(cuid())
  name              String
  actionType        String
  category          String
  description       String
  defaultSettings   String?
  requiredFields    String?
  optionalFields    String?
  estimatedDuration String?
  recommendedFor    String?
  isActive          Boolean  @default(true)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([actionType])
  @@index([category])
  @@index([isActive])
}

model IntelligenceBriefing {
  id              String                       @id @default(cuid())
  countryId       String
  title           String
  description     String
  type            BriefingType
  priority        Priority
  area            Category
  confidence      Float
  urgency         Urgency
  impactMagnitude String
  evidence        String
  generatedAt     DateTime                     @default(now())
  expiresAt       DateTime?
  isActive        Boolean                      @default(true)
  createdAt       DateTime                     @default(now())
  updatedAt       DateTime                     @updatedAt
  alerts          IntelligenceAlert[]
  recommendations IntelligenceRecommendation[]

  @@index([countryId])
  @@index([type])
  @@index([priority])
  @@index([isActive])
  @@index([generatedAt])
}

model IntelligenceRecommendation {
  id                 String                @id @default(cuid())
  briefingId         String?
  countryId          String
  title              String
  description        String
  category           Category
  urgency            String
  difficulty         Difficulty
  estimatedDuration  String
  estimatedCost      String
  estimatedBenefit   String
  prerequisites      String
  risks              String
  successProbability Float
  economicImpact     Float                 @default(0)
  socialImpact       Float                 @default(0)
  diplomaticImpact   Float                 @default(0)
  isImplemented      Boolean               @default(false)
  implementedAt      DateTime?
  generatedAt        DateTime              @default(now())
  isActive           Boolean               @default(true)
  createdAt          DateTime              @default(now())
  updatedAt          DateTime              @updatedAt
  briefing           IntelligenceBriefing? @relation(fields: [briefingId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([category])
  @@index([urgency])
  @@index([isActive])
}

model IntelligenceAlert {
  id            String                @id @default(cuid())
  briefingId    String?
  countryId     String
  title         String
  description   String
  severity      Priority
  category      Category
  alertType     String
  currentValue  Float
  expectedValue Float
  deviation     Float
  zScore        Float
  factors       String
  confidence    Float
  isResolved    Boolean               @default(false)
  resolvedAt    DateTime?
  detectedAt    DateTime              @default(now())
  isActive      Boolean               @default(true)
  createdAt     DateTime              @default(now())
  updatedAt     DateTime              @updatedAt
  briefing      IntelligenceBriefing? @relation(fields: [briefingId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([severity])
  @@index([category])
  @@index([isActive])
  @@index([detectedAt])
}

model IntelligenceAlertThreshold {
  id               String   @id @default(cuid())
  countryId        String
  userId           String
  alertType        String
  metricName       String
  criticalMin      Float?
  criticalMax      Float?
  highMin          Float?
  highMax          Float?
  mediumMin        Float?
  mediumMax        Float?
  notifyOnCritical Boolean  @default(true)
  notifyOnHigh     Boolean  @default(true)
  notifyOnMedium   Boolean  @default(false)
  isActive         Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@unique([countryId, alertType, metricName])
  @@index([countryId])
  @@index([userId])
}

model IntelligenceTemplate {
  id               String   @id @default(cuid())
  reportType       String
  classification   String
  summaryTemplate  String
  findingsTemplate String
  minimumLevel     Int
  confidenceBase   Int
  isActive         Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([reportType, isActive])
  @@index([minimumLevel])
}

model VitalitySnapshot {
  id                  String   @id @default(cuid())
  countryId           String
  area                Category
  score               Float
  trend               Trend
  changeValue         Float
  changePeriod        String
  keyMetrics          String
  peerAverage         Float
  regionalAverage     Float
  historicalBest      Float
  rank                Int
  totalCountries      Int
  criticalAlertsCount Int      @default(0)
  calculatedAt        DateTime @default(now())
  ixTime              Float
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@index([countryId])
  @@index([area])
  @@index([calculatedAt])
  @@index([ixTime])
}

model MilitaryBranch {
  id                  String          @id @default(cuid())
  countryId           String
  branchType          BranchType
  name                String
  motto               String?
  imageUrl            String?
  description         String?
  established         String?
  activeDuty          Int             @default(0)
  reserves            Int             @default(0)
  civilianStaff       Int             @default(0)
  annualBudget        Float           @default(0)
  budgetPercent       Float           @default(0)
  readinessLevel      Float           @default(50)
  technologyLevel     Float           @default(50)
  trainingLevel       Float           @default(50)
  morale              Float           @default(50)
  deploymentCapacity  Float           @default(50)
  sustainmentCapacity Float           @default(50)
  isActive            Boolean         @default(true)
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt
  assets              MilitaryAsset[]
  country             Country         @relation("CountryMilitaryBranches", fields: [countryId], references: [id], onDelete: Cascade)
  units               MilitaryUnit[]

  @@index([countryId])
  @@index([branchType])
  @@index([isActive])
}

model MilitaryUnit {
  id            String          @id @default(cuid())
  branchId      String
  name          String
  unitType      String
  designation   String?
  description   String?
  personnel     Int             @default(0)
  commanderName String?
  commanderRank String?
  headquarters  String?
  readiness     Float           @default(50)
  imageUrl      String?
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  assets        MilitaryAsset[]
  branch        MilitaryBranch  @relation(fields: [branchId], references: [id], onDelete: Cascade)

  @@index([branchId])
}

model MilitaryAsset {
  id                 String         @id @default(cuid())
  branchId           String
  unitId             String?
  name               String
  assetType          AssetType
  category           String
  status             AssetStatus    @default(operational)
  quantity           Int            @default(1)
  operational        Int            @default(1)
  acquisitionCost    Float          @default(0)
  maintenanceCost    Float          @default(0)
  modernizationLevel Float          @default(50)
  capability         String?
  imageUrl           String?
  createdAt          DateTime       @default(now())
  updatedAt          DateTime       @updatedAt
  branch             MilitaryBranch @relation(fields: [branchId], references: [id], onDelete: Cascade)
  unit               MilitaryUnit?  @relation(fields: [unitId], references: [id])

  @@index([branchId])
  @@index([unitId])
  @@index([assetType])
  @@index([status])
}

model SecurityThreat {
  id                  String           @id @default(cuid())
  countryId           String
  userId              String?
  threatName          String
  threatType          ThreatType
  severity            ThreatSeverity
  status              ThreatStatus     @default(monitoring)
  description         String?
  likelihood          Float            @default(50)
  impact              Float            @default(50)
  urgency             String?
  actorType           String?
  actorName           String?
  actorLocation       String?
  actorCapability     Float            @default(50)
  potentialCasualties Int              @default(0)
  economicImpact      Float            @default(0)
  politicalImpact     String?
  infrastructureRisk  Float            @default(0)
  responseLevel       String?
  mitigationActions   String?
  resourcesAllocated  Float            @default(0)
  intelligenceSource  String?
  confidenceLevel     Float            @default(50)
  estimatedTimeline   String?
  tags                String?
  lastUpdated         DateTime         @updatedAt
  detectedAt          DateTime         @default(now())
  isActive            Boolean          @default(true)
  createdAt           DateTime         @default(now())
  updatedAt           DateTime         @updatedAt
  country             Country          @relation("CountrySecurityThreats", fields: [countryId], references: [id], onDelete: Cascade)
  incidents           ThreatIncident[]

  @@index([countryId])
  @@index([threatType])
  @@index([severity])
  @@index([isActive])
  @@index([userId])
}

model ThreatIncident {
  id              String         @id @default(cuid())
  threatId        String
  title           String
  description     String
  incidentType    String
  casualties      Int            @default(0)
  damage          Float          @default(0)
  location        String?
  responseActions String?
  effectiveness   Float?
  occurredAt      DateTime       @default(now())
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  threat          SecurityThreat @relation(fields: [threatId], references: [id], onDelete: Cascade)

  @@index([threatId])
  @@index([occurredAt])
}

model DefenseBudget {
  id                    String   @id @default(cuid())
  countryId             String   @unique
  fiscalYear            Int
  totalBudget           Float    @default(0)
  gdpPercent            Float    @default(0)
  perCapita             Float    @default(0)
  personnelCosts        Float    @default(0)
  operationsMaintenance Float    @default(0)
  procurement           Float    @default(0)
  rdteCosts             Float    @default(0)
  militaryConstruction  Float    @default(0)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  country               Country  @relation("CountryDefenseBudget", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([fiscalYear])
}

model SecurityAssessment {
  id                   String   @id @default(cuid())
  countryId            String   @unique
  overallSecurityScore Float    @default(60)
  securityLevel        String   @default("moderate")
  securityTrend        String   @default("stable")
  militaryStrength     Float    @default(60)
  internalStability    Float    @default(60)
  borderSecurity       Float    @default(60)
  cybersecurity        Float    @default(50)
  counterTerrorism     Float    @default(55)
  militaryReadiness    Float    @default(65)
  emergencyResponse    Float    @default(60)
  disasterPreparedness Float    @default(55)
  activeThreatCount    Int      @default(0)
  highSeverityThreats  Int      @default(0)
  lastAssessed         DateTime @default(now())
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  country              Country  @relation("CountrySecurityAssessment", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([securityLevel])
}

model InternalStabilityMetrics {
  id                      String   @id @default(cuid())
  countryId               String   @unique
  stabilityScore          Float    @default(75)
  stabilityTrend          String   @default("stable")
  crimeRate               Float    @default(5)
  violentCrimeRate        Float    @default(2)
  propertyCrimeRate       Float    @default(10)
  organizedCrimeLevel     Float    @default(3)
  policingEffectiveness   Float    @default(60)
  justiceSystemEfficiency Float    @default(50)
  protestFrequency        Float    @default(5)
  riotRisk                Float    @default(10)
  civilDisobedience       Float    @default(5)
  socialCohesion          Float    @default(70)
  ethnicTension           Float    @default(20)
  politicalPolarization   Float    @default(40)
  trustInGovernment       Float    @default(50)
  trustInPolice           Float    @default(55)
  fearOfCrime             Float    @default(35)
  lastCalculated          DateTime @default(now())
  createdAt               DateTime @default(now())
  updatedAt               DateTime @updatedAt
  country                 Country  @relation("CountryStabilityMetrics", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
}

model SecurityEvent {
  id              String    @id @default(cuid())
  countryId       String
  eventType       String
  severity        String
  status          String    @default("active")
  title           String
  description     String?
  casualties      Int       @default(0)
  arrested        Int       @default(0)
  economicImpact  Float     @default(0)
  stabilityImpact Float     @default(0)
  region          String?
  city            String?
  triggerFactors  String?
  rngSeed         String?
  resolutionNotes String?
  startDate       DateTime  @default(now())
  endDate         DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  country         Country   @relation("CountrySecurityEvents", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId])
  @@index([status])
  @@index([severity])
}

model BorderSecurity {
  id                    String                     @id @default(cuid())
  countryId             String                     @unique
  overallSecurityLevel  Float                      @default(70)
  securityStatus        String                     @default("moderate")
  borderIntegrity       Float                      @default(85)
  borderLength          Float?
  landBorders           Int                        @default(0)
  maritimeBorders       Int                        @default(0)
  borderAgents          Int                        @default(0)
  checkpoints           Int                        @default(0)
  surveillanceSystems   Int                        @default(0)
  interceptionRate      Float                      @default(60)
  processingEfficiency  Float                      @default(70)
  illegalCrossings      Int                        @default(0)
  smugglingActivity     Float                      @default(20)
  traffickingRisk       Float                      @default(15)
  refugeePresure        Float                      @default(10)
  technologyLevel       Float                      @default(50)
  infrastructureQuality Float                      @default(60)
  lastAssessed          DateTime                   @default(now())
  createdAt             DateTime                   @default(now())
  updatedAt             DateTime                   @updatedAt
  country               Country                    @relation("CountryBorderSecurity", fields: [countryId], references: [id], onDelete: Cascade)
  neighborThreats       NeighborThreatAssessment[]

  @@index([countryId])
}

model NeighborThreatAssessment {
  id                  String         @id @default(cuid())
  borderSecurityId    String
  neighborName        String
  neighborCountryId   String?
  borderType          String
  borderLength        Float?
  threatLevel         String         @default("low")
  threatScore         Float          @default(20)
  militaryThreat      Float          @default(10)
  terrorismRisk       Float          @default(15)
  smugglingRisk       Float          @default(25)
  refugeeFlow         Float          @default(20)
  politicalStability  Float          @default(60)
  diplomaticRelations String         @default("neutral")
  tradeVolume         Float          @default(0)
  treatyStatus        String?
  notes               String?
  lastAssessed        DateTime       @default(now())
  createdAt           DateTime       @default(now())
  updatedAt           DateTime       @updatedAt
  borderSecurity      BorderSecurity @relation(fields: [borderSecurityId], references: [id], onDelete: Cascade)

  @@index([borderSecurityId])
}

model CountryFollow {
  id                String   @id @default(cuid())
  followerCountryId String
  followedCountryId String
  createdAt         DateTime @default(now())
  followedCountry   Country  @relation("CountryFollowing", fields: [followedCountryId], references: [id], onDelete: Cascade)
  followerCountry   Country  @relation("CountryFollowers", fields: [followerCountryId], references: [id], onDelete: Cascade)

  @@unique([followerCountryId, followedCountryId])
  @@index([followerCountryId])
  @@index([followedCountryId])
}

model SystemLog {
  id           String   @id @default(cuid())
  level        String
  category     String
  message      String
  userId       String?
  countryId    String?
  requestId    String?
  traceId      String?
  duration     Int?
  errorName    String?
  errorMessage String?
  errorStack   String?
  metadata     String?
  component    String?
  ip           String?
  userAgent    String?
  endpoint     String?
  method       String?
  timestamp    DateTime @default(now())

  @@index([level])
  @@index([category])
  @@index([userId])
  @@index([countryId])
  @@index([timestamp])
  @@index([requestId])
}

model LogRetentionPolicy {
  id               String   @id @default(cuid())
  logLevel         String   @unique
  retentionDays    Int
  archiveAfterDays Int?
  deleteAfterDays  Int
  enabled          Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model ExternalApiCache {
  id               String   @id @default(cuid())
  key              String   @unique
  service          String
  type             String
  identifier       String
  data             String
  countryName      String?
  metadata         String?
  contentHash      String?
  hitCount         Int      @default(0)
  lastValidatedAt  DateTime @default(now())
  validationStatus String   @default("valid")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  expiresAt        DateTime

  @@index([key])
  @@index([service, type, identifier])
  @@index([service, countryName])
  @@index([expiresAt])
  @@index([lastValidatedAt])
  @@index([validationStatus])
  @@index([countryName])
}

model WikiCache {
  id          String   @id @default(cuid())
  key         String   @unique
  type        String
  data        String
  countryName String?
  metadata    String?
  hitCount    Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  expiresAt   DateTime

  @@index([key])
  @@index([type, countryName])
  @@index([expiresAt])
  @@index([countryName])
}

model CustomGovernmentType {
  id             String   @id @default(cuid())
  userId         String
  customTypeName String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  usageCount     Int      @default(1)
  lastUsedAt     DateTime @default(now())

  @@unique([userId, customTypeName])
  @@index([userId])
  @@index([usageCount])
}

model CustomFieldValue {
  id         String   @id @default(cuid())
  fieldName  String
  value      String
  userId     String?
  usageCount Int      @default(1)
  isGlobal   Boolean  @default(false)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  lastUsedAt DateTime @default(now())

  @@unique([fieldName, value, userId])
  @@index([fieldName, isGlobal])
  @@index([userId])
  @@index([usageCount])
}

model EncryptionKey {
  id                         String    @id
  countryId                  String
  publicKey                  String
  encryptedPrivateKey        String
  signingPublicKey           String
  encryptedSigningPrivateKey String
  version                    String    @default("v1")
  status                     String    @default("ACTIVE")
  expiresAt                  DateTime
  createdAt                  DateTime  @default(now())
  revokedAt                  DateTime?

  @@index([countryId])
  @@index([status])
  @@index([expiresAt])
}

model EncryptionAuditLog {
  id             String   @id @default(cuid())
  countryId      String
  operation      String
  classification String
  success        Boolean
  errorMessage   String?
  metadata       String?
  userId         String?
  ipAddress      String?
  userAgent      String?
  createdAt      DateTime @default(now())

  @@index([countryId])
  @@index([operation])
  @@index([createdAt])
}

model EconomicArchetype {
  id                       String   @id @default(cuid())
  key                      String   @unique
  name                     String
  description              String
  region                   String
  era                      String
  characteristics          String
  economicComponents       String
  governmentComponents     String
  taxProfile               String
  sectorFocus              String
  employmentProfile        String
  growthMetrics            String
  strengths                String
  challenges               String
  culturalFactors          String
  modernExamples           String
  recommendations          String
  implementationComplexity String
  historicalContext        String
  isActive                 Boolean  @default(true)
  isCustom                 Boolean  @default(false)
  createdBy                String?
  usageCount               Int      @default(0)
  createdAt                DateTime @default(now())
  updatedAt                DateTime @updatedAt

  @@index([key])
  @@index([era])
  @@index([region])
  @@index([isActive])
  @@index([usageCount])
}

model GovernmentComponentData {
  id                 String        @id @default(cuid())
  componentType      ComponentType @unique
  name               String
  description        String
  category           String
  effectiveness      Int
  implementationCost Int
  maintenanceCost    Int
  requiredCapacity   Int
  synergies          String
  conflicts          String
  prerequisites      String
  metadata           String
  color              String
  iconName           String
  isActive           Boolean       @default(true)
  usageCount         Int           @default(0)
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt

  @@index([category, isActive])
  @@index([componentType])
  @@index([usageCount])
}

model GovernmentSynergy {
  id           String        @id @default(cuid())
  component1   ComponentType
  component2   ComponentType
  synergyType  String
  bonusPercent Int
  description  String
  isActive     Boolean       @default(true)

  @@unique([component1, component2])
  @@index([component1])
  @@index([component2])
  @@index([synergyType])
}

model EconomicComponentData {
  id                  String                @id @default(cuid())
  componentType       EconomicComponentType @unique
  name                String
  description         String
  category            String
  effectiveness       Int
  synergies           String
  conflicts           String
  governmentSynergies String
  governmentConflicts String
  taxImpact           String
  sectorImpact        String
  employmentImpact    String
  implementationCost  Int
  maintenanceCost     Int
  requiredCapacity    Int
  color               String
  iconName            String
  metadata            String
  isActive            Boolean               @default(true)
  usageCount          Int                   @default(0)
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt

  @@index([category, isActive])
  @@index([componentType])
  @@index([usageCount])
}

model EconomicSynergy {
  id           String                @id @default(cuid())
  component1   EconomicComponentType
  component2   EconomicComponentType
  synergyType  String
  bonusPercent Int
  description  String
  isActive     Boolean               @default(true)

  @@unique([component1, component2])
  @@index([component1])
  @@index([component2])
  @@index([synergyType])
}

model EconomicTemplate {
  id          String   @id @default(cuid())
  key         String   @unique
  name        String
  description String
  components  String
  iconName    String
  isActive    Boolean  @default(true)
  usageCount  Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([isActive])
  @@index([usageCount])
}

model MilitaryEquipmentCatalog {
  id                String   @id @default(cuid())
  key               String   @unique
  name              String
  manufacturer      String
  category          String
  subcategory       String?
  era               String
  specifications    String
  capabilities      String
  acquisitionCost   Float
  maintenanceCost   Float
  technologyLevel   Int
  crewRequirement   Int
  maintenanceHours  Int?
  imageUrl          String?
  description       String?
  historicalContext String?
  isActive          Boolean  @default(true)
  usageCount        Int      @default(0)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([category, era])
  @@index([manufacturer])
  @@index([technologyLevel])
  @@index([isActive, usageCount])
}

model DefenseManufacturer {
  id        String   @id @default(cuid())
  key       String   @unique
  name      String
  country   String
  specialty String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([country])
  @@index([isActive])
}

model SmallArmsManufacturer {
  id        String               @id @default(cuid())
  key       String               @unique
  name      String
  country   String
  specialty String
  isActive  Boolean              @default(true)
  createdAt DateTime             @default(now())
  updatedAt DateTime             @updatedAt
  equipment SmallArmsEquipment[]

  @@index([country])
  @@index([isActive])
}

model WeaponEra {
  id          String               @id @default(cuid())
  key         String               @unique
  label       String
  years       String
  reliability Int
  isActive    Boolean              @default(true)
  createdAt   DateTime             @default(now())
  updatedAt   DateTime             @updatedAt
  equipment   SmallArmsEquipment[]

  @@index([isActive])
}

model SmallArmsEquipment {
  id              String                @id @default(cuid())
  key             String                @unique
  name            String
  manufacturerKey String
  category        String
  equipmentType   String
  eraKey          String
  weight          Float
  unitCost        Float
  maintenanceCost Float
  imageUrl        String?
  caliber         String?
  capacity        Int?
  effectiveRange  Int?
  fireRate        Int?
  protectionLevel String?
  range           Int?
  altitude        Int?
  description     String?
  isActive        Boolean               @default(true)
  usageCount      Int                   @default(0)
  createdAt       DateTime              @default(now())
  updatedAt       DateTime              @updatedAt
  era             WeaponEra             @relation(fields: [eraKey], references: [key])
  manufacturer    SmallArmsManufacturer @relation(fields: [manufacturerKey], references: [key])

  @@index([equipmentType, eraKey])
  @@index([manufacturerKey])
  @@index([category])
  @@index([eraKey])
  @@index([isActive, usageCount])
  @@index([equipmentType, category])
  @@index([unitCost])
}

model DiplomaticScenario {
  id                      String               @id @default(cuid())
  key                     String               @unique
  scenarioType            String
  title                   String
  introduction            String
  context                 String
  situation               String
  implications            String
  urgency                 String?
  relationshipLevel       String
  timeFrame               String
  difficulty              String
  recommendedEmbassyLevel Int                  @default(1)
  minimumRelationship     Int?
  requiredEconomicTier    String?
  triggerConditions       String
  eligibilityCriteria     String
  templateVariables       String
  historicalContext       String
  involvedCountries       String
  weight                  Float                @default(1.0)
  baseRelevance           Int                  @default(50)
  isActive                Boolean              @default(true)
  isCustom                Boolean              @default(false)
  usageCount              Int                  @default(0)
  lastUsedAt              DateTime?
  createdBy               String?
  createdAt               DateTime             @default(now())
  updatedAt               DateTime             @updatedAt
  choices                 ScenarioChoice[]
  generations             ScenarioGeneration[]

  @@index([scenarioType, relationshipLevel])
  @@index([difficulty, timeFrame])
  @@index([isActive, usageCount])
  @@index([recommendedEmbassyLevel])
}

model ScenarioChoice {
  id             String             @id @default(cuid())
  scenarioId     String
  choiceKey      String
  label          String
  description    String
  skillRequired  String
  skillLevel     Int
  riskLevel      String
  requirements   String
  shortTerm      String
  mediumTerm     String
  longTerm       String
  effects        String
  displayOrder   Int                @default(0)
  isActive       Boolean            @default(true)
  selectionCount Int                @default(0)
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt
  scenario       DiplomaticScenario @relation(fields: [scenarioId], references: [id], onDelete: Cascade)

  @@index([scenarioId, displayOrder])
  @@index([skillRequired, skillLevel])
  @@index([riskLevel])
}

model ScenarioGeneration {
  id              String             @id @default(cuid())
  scenarioId      String
  countryId       String
  targetCountryId String
  worldContext    String
  relevanceScore  Int
  choiceId        String?
  responseTime    DateTime?
  appliedEffects  String?
  outcomeNotes    String?
  generatedAt     DateTime           @default(now())
  expiresAt       DateTime?
  completedAt     DateTime?
  scenario        DiplomaticScenario @relation(fields: [scenarioId], references: [id], onDelete: Cascade)

  @@index([countryId, generatedAt])
  @@index([scenarioId, targetCountryId])
  @@index([expiresAt])
}

model ScenarioTemplate {
  id                   String   @id @default(cuid())
  templateKey          String   @unique
  scenarioType         String
  titleTemplate        String
  introductionTemplate String
  contextTemplate      String
  situationTemplate    String
  implicationsTemplate String
  requiredVariables    String
  isActive             Boolean  @default(true)
  usageCount           Int      @default(0)
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt

  @@index([scenarioType, isActive])
}

model ScenarioUsageAnalytics {
  id                        String   @id @default(cuid())
  scenarioId                String   @unique
  choiceId                  String?
  totalGenerations          Int      @default(0)
  totalCompletions          Int      @default(0)
  completionRate            Float    @default(0.0)
  choiceDistribution        String
  averageRelationshipChange Float    @default(0.0)
  averageEconomicImpact     Float    @default(0.0)
  averageReputationChange   Float    @default(0.0)
  averageSecurityImpact     Float    @default(0.0)
  averageResponseTime       Float    @default(0.0)
  lastUpdated               DateTime @default(now())

  @@index([totalGenerations])
  @@index([completionRate])
}

model NPCPersonality {
  id                  String                     @id @default(cuid())
  name                String
  archetype           String
  assertiveness       Int                        @default(50)
  cooperativeness     Int                        @default(50)
  economicFocus       Int                        @default(50)
  culturalOpenness    Int                        @default(50)
  riskTolerance       Int                        @default(50)
  ideologicalRigidity Int                        @default(50)
  militarism          Int                        @default(50)
  isolationism        Int                        @default(50)
  traitDescriptions   String
  culturalProfile     String
  toneMatrix          String
  responsePatterns    String
  scenarioResponses   String
  eventModifiers      String
  historicalBasis     String?
  historicalContext   String?
  isActive            Boolean                    @default(true)
  usageCount          Int                        @default(0)
  createdAt           DateTime                   @default(now())
  updatedAt           DateTime                   @updatedAt
  npcAssignments      NPCPersonalityAssignment[]

  @@index([archetype])
  @@index([usageCount])
  @@index([isActive])
  @@index([assertiveness])
  @@index([cooperativeness])
}

model NPCPersonalityAssignment {
  id            String         @id @default(cuid())
  personalityId String
  countryId     String         @unique
  assignedAt    DateTime       @default(now())
  assignedBy    String?
  reason        String?
  driftHistory  String?
  lastDriftAt   DateTime?
  country       Country        @relation(fields: [countryId], references: [id], onDelete: Cascade)
  personality   NPCPersonality @relation(fields: [personalityId], references: [id], onDelete: Cascade)

  @@index([personalityId])
  @@index([countryId])
  @@index([assignedAt])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model spatial_ref_sys {
  srid      Int     @id
  auth_name String? @db.VarChar(256)
  auth_srid Int?
  srtext    String? @db.VarChar(2048)
  proj4text String? @db.VarChar(2048)
}

model Subdivision {
  id              String                   @id @default(cuid())
  countryId       String
  name            String
  type            String
  geometry        Json
  level           Int
  population      Float?
  capital         String?
  areaSqKm        Float?
  status          String                   @default("pending")
  submittedBy     String
  reviewedBy      String?
  reviewedAt      DateTime?
  rejectionReason String?
  createdAt       DateTime                 @default(now())
  updatedAt       DateTime                 @updatedAt
  geom_postgis    Unsupported("geometry")?
  cities          City[]                   @relation("SubdivisionCities")
  pois            PointOfInterest[]        @relation("SubdivisionPOIs")
  country         Country                  @relation("CountrySubdivisions", fields: [countryId], references: [id], onDelete: Cascade)

  @@index([countryId, status])
  @@index([status, createdAt])
  @@index([geom_postgis], map: "idx_subdivision_geom", type: Gist)
  @@map("subdivisions")
}

model City {
  id                   String                   @id @default(cuid())
  countryId            String
  subdivisionId        String?
  name                 String
  type                 String
  coordinates          Json
  population           Float?
  isNationalCapital    Boolean                  @default(false)
  isSubdivisionCapital Boolean                  @default(false)
  elevation            Float?
  foundedYear          Int?
  status               String                   @default("pending")
  submittedBy          String
  reviewedBy           String?
  reviewedAt           DateTime?
  rejectionReason      String?
  createdAt            DateTime                 @default(now())
  updatedAt            DateTime                 @updatedAt
  geom_postgis         Unsupported("geometry")?
  country              Country                  @relation("CountryCities", fields: [countryId], references: [id], onDelete: Cascade)
  subdivision          Subdivision?             @relation("SubdivisionCities", fields: [subdivisionId], references: [id])

  @@index([countryId, status])
  @@index([type, isNationalCapital])
  @@index([status, createdAt])
  @@index([geom_postgis], map: "idx_city_geom", type: Gist)
  @@map("cities")
}

model PointOfInterest {
  id              String                   @id @default(cuid())
  countryId       String
  subdivisionId   String?
  name            String
  category        String
  icon            String?
  coordinates     Json
  description     String?
  images          Json?
  metadata        Json?
  status          String                   @default("pending")
  submittedBy     String
  reviewedBy      String?
  reviewedAt      DateTime?
  rejectionReason String?
  createdAt       DateTime                 @default(now())
  updatedAt       DateTime                 @updatedAt
  geom_postgis    Unsupported("geometry")?
  country         Country                  @relation("CountryPOIs", fields: [countryId], references: [id], onDelete: Cascade)
  subdivision     Subdivision?             @relation("SubdivisionPOIs", fields: [subdivisionId], references: [id])

  @@index([countryId, status, category])
  @@index([category, status])
  @@index([status, createdAt])
  @@index([geom_postgis], map: "idx_poi_geom", type: Gist)
  @@map("points_of_interest")
}

/// *
///  * MyVault - Personal vault system for IxCredits currency and card collectibles
///  * Replaces legacy IxBank system with enhanced features
model MyVault {
  id             String             @id(map: "MyVault_pkey") @default(cuid())
  userId         String             @unique(map: "MyVault_userId_key")
  credits        Float              @default(0)
  lifetimeEarned Float              @default(0)
  lifetimeSpent  Float              @default(0)
  vaultLevel     Int                @default(1)
  vaultXp        Int                @default(0)
  loginStreak    Int                @default(0)
  lastLoginDate  DateTime?
  todayEarned    Float              @default(0)
  lastDailyReset DateTime           @default(now())
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @default(now()) @updatedAt
  user           User               @relation(fields: [userId], references: [id], onDelete: Cascade, map: "MyVault_userId_fkey")
  transactions   VaultTransaction[]

  @@index([userId], map: "MyVault_userId_idx")
  @@map("my_vault")
}

/// *
///  * VaultTransaction - Transaction history for IxCredits
///  * Tracks all earning and spending activities
model VaultTransaction {
  id           String   @id @default(cuid())
  vaultId      String
  credits      Float
  balanceAfter Float
  type         String
  source       String
  metadata     Json?
  createdAt    DateTime @default(now())
  vault        MyVault  @relation(fields: [vaultId], references: [id], onDelete: Cascade, map: "VaultTransaction_vaultId_fkey")

  @@index([vaultId, createdAt])
  @@index([type, createdAt])
  @@map("vault_transactions")
}

/// *
///  * Card - Core card model with IxStats, NationStates, and Wiki integration
///  * Supports multiple card types and rarity tiers
model Card {
  id               String          @id(map: "Card_pkey") @default(cuid())
  title            String
  description      String?
  artwork          String?
  rarity           String
  season           Int             @default(1)
  cardType         String
  attributes       Json?
  marketValue      Float           @default(0.0)
  totalSupply      Int?
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @default(now()) @updatedAt
  nsCardId         Int?
  nsSeason         Int?
  wikiSource       String?
  wikiArticleTitle String?
  countryId        String?
  stats            Json?
  level            Int?            @default(1)
  enhancements     Json?
  artworkVariants  Json?
  name             String?
  metadata         Json?
  CardOwnership    CardOwnership[]

  @@unique([nsCardId, nsSeason])
  @@index([cardType, rarity, season])
  @@index([marketValue])
  @@index([countryId])
  @@index([rarity], map: "Card_rarity_idx")
  @@index([season], map: "Card_season_idx")
  @@map("cards")
}

/// *
///  * NSVerification - NationStates nation ownership verification
///  * Tracks verification attempts for NS deck imports
model NSVerification {
  id               String    @id
  userId           String
  nationName       String
  verificationCode String
  verified         Boolean   @default(false)
  verifiedAt       DateTime?
  expiresAt        DateTime
  createdAt        DateTime  @default(now())
  user             User      @relation(fields: [userId], references: [id], onDelete: Cascade, map: "NSVerification_userId_fkey")

  @@map("ns_verifications")
}

model AuctionBid {
  id          String      @id
  auctionId   String
  bidderId    String
  amount      Int
  createdAt   DateTime    @default(now())
  CardAuction CardAuction @relation(fields: [auctionId], references: [id], onDelete: Cascade)
  User        User        @relation(fields: [bidderId], references: [id], onDelete: Cascade)

  @@index([auctionId])
  @@index([bidderId])
}

model CardAuction {
  id              String        @id
  cardInstanceId  String
  sellerId        String
  startingPrice   Int
  currentBid      Int
  buyoutPrice     Int?
  currentBidderId String?
  winnerId        String?
  finalPrice      Int?
  bidCount        Int           @default(0)
  status          String        @default("ACTIVE")
  isFeatured      Boolean       @default(false)
  endTime         DateTime
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @default(now())
  AuctionBid      AuctionBid[]
  CardOwnership   CardOwnership @relation(fields: [cardInstanceId], references: [id], onDelete: Cascade)
  User            User          @relation(fields: [sellerId], references: [id], onDelete: Cascade)

  @@index([endTime])
  @@index([sellerId])
  @@index([status])
}

model CardCollection {
  id          String   @id
  userId      String
  name        String
  description String?
  isPublic    Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @default(now())
  User        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

model CardOwnership {
  id            String        @id
  cardId        String
  userId        String
  ownerId       String
  serialNumber  Int
  level         Int           @default(1)
  experience    Int           @default(0)
  isLocked      Boolean       @default(false)
  lastSalePrice Int?
  lastSaleDate  DateTime?
  acquiredAt    DateTime      @default(now())
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @default(now())
  quantity      Int           @default(1)
  CardAuction   CardAuction[]
  cards         Card          @relation(fields: [cardId], references: [id], onDelete: Cascade)
  User          User          @relation(fields: [ownerId], references: [id], onDelete: Cascade)

  @@index([cardId])
  @@index([ownerId])
  @@index([userId])
}

model CardPack {
  id               String     @id
  name             String
  description      String?
  artwork          String?
  packType         String
  priceCredits     Int
  cardCount        Int
  guaranteedRarity String?
  isActive         Boolean    @default(true)
  commonOdds       Float      @default(65.0)
  uncommonOdds     Float      @default(25.0)
  rareOdds         Float      @default(7.0)
  ultraRareOdds    Float      @default(2.0)
  epicOdds         Float      @default(0.9)
  legendaryOdds    Float      @default(0.1)
  season           Int?
  cardType         String?
  themeFilter      Json?
  limitedQuantity  Int?
  purchaseLimit    Int?
  expiresAt        DateTime?
  createdAt        DateTime   @default(now())
  updatedAt        DateTime   @default(now())
  UserPack         UserPack[]
}

model UserPack {
  id             String    @id @default(cuid())
  userId         String
  packId         String
  isOpened       Boolean   @default(false)
  acquiredMethod String    @default("PURCHASE")
  acquiredDate   DateTime  @default(now())
  openedAt       DateTime?
  pack           CardPack  @relation(fields: [packId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([packId])
  @@map("user_packs")
}

model NSImport {
  id           String    @id @default(cuid())
  userId       String
  nationName   String
  cardCount    Int
  totalValue   Float
  status       String    @default("PENDING")
  errorMessage String?
  createdAt    DateTime  @default(now())
  completedAt  DateTime?

  @@index([userId])
  @@index([status])
  @@map("ns_imports")
}

model SyncLog {
  id             String    @id @default(cuid())
  syncType       String
  status         String
  itemsProcessed Int       @default(0)
  itemsFailed    Int       @default(0)
  errorMessage   String?
  startedAt      DateTime  @default(now())
  completedAt    DateTime?
  season         Int?
  cardsProcessed Int?
  cardsCreated   Int?
  cardsUpdated   Int?
  errors         String?

  @@index([syncType, status])
  @@map("sync_logs")
}

model CardTrade {
  id          String    @id
  fromUserId  String
  toUserId    String
  status      String    @default("PENDING")
  expiresAt   DateTime?
  completedAt DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @default(now())
}

model map_layer_rivers {
  ogc_fid           Int                      @id @default(autoincrement())
  id                String?                  @db.VarChar
  ixmap_subgroup    String?                  @db.VarChar
  fill              String?                  @db.VarChar
  country_id        String?                  @db.VarChar
  geometry          Unsupported("geometry")?
  geometry_buffered Unsupported("geometry")?

  @@index([geometry_buffered], map: "idx_map_layer_rivers_buffered", type: Gist)
  @@index([geometry], map: "map_layer_rivers_geometry_geom_idx", type: Gist)
}

enum Priority {
  CRITICAL
  HIGH
  MEDIUM
  LOW
  critical
  high
  medium
  low
}

enum Category {
  ECONOMIC
  DIPLOMATIC
  SOCIAL
  GOVERNANCE
  SECURITY
  INFRASTRUCTURE
  CRISIS
  economic
  diplomatic
  social
  governance
  security
  infrastructure
  crisis
}

enum Trend {
  up
  down
  stable
}

enum ComponentType {
  CENTRALIZED_POWER
  FEDERAL_SYSTEM
  CONFEDERATE_SYSTEM
  UNITARY_SYSTEM
  DEMOCRATIC_PROCESS
  AUTOCRATIC_PROCESS
  TECHNOCRATIC_PROCESS
  CONSENSUS_PROCESS
  OLIGARCHIC_PROCESS
  ELECTORAL_LEGITIMACY
  TRADITIONAL_LEGITIMACY
  PERFORMANCE_LEGITIMACY
  CHARISMATIC_LEGITIMACY
  RELIGIOUS_LEGITIMACY
  INSTITUTIONAL_LEGITIMACY
  PROFESSIONAL_BUREAUCRACY
  MILITARY_ADMINISTRATION
  INDEPENDENT_JUDICIARY
  PARTISAN_INSTITUTIONS
  TECHNOCRATIC_AGENCIES
  RULE_OF_LAW
  SURVEILLANCE_SYSTEM
  ECONOMIC_INCENTIVES
  SOCIAL_PRESSURE
  MILITARY_ENFORCEMENT
  FREE_MARKET_SYSTEM
  PLANNED_ECONOMY
  MIXED_ECONOMY
  CORPORATIST_SYSTEM
  SOCIAL_MARKET_ECONOMY
  STATE_CAPITALISM
  RESOURCE_BASED_ECONOMY
  KNOWLEDGE_ECONOMY
  DIGITAL_GOVERNMENT
  E_GOVERNANCE
  ADMINISTRATIVE_DECENTRALIZATION
  MERIT_BASED_SYSTEM
  PERFORMANCE_MANAGEMENT
  QUALITY_ASSURANCE
  STRATEGIC_PLANNING
  RISK_MANAGEMENT
  WELFARE_STATE
  UNIVERSAL_HEALTHCARE
  PUBLIC_EDUCATION
  SOCIAL_SAFETY_NET
  WORKER_PROTECTION
  ENVIRONMENTAL_PROTECTION
  CULTURAL_PRESERVATION
  MINORITY_RIGHTS
  MULTILATERAL_DIPLOMACY
  BILATERAL_RELATIONS
  REGIONAL_INTEGRATION
  INTERNATIONAL_LAW
  DEVELOPMENT_AID
  HUMANITARIAN_INTERVENTION
  TRADE_AGREEMENTS
  SECURITY_ALLIANCES
  RESEARCH_AND_DEVELOPMENT
  INNOVATION_ECOSYSTEM
  TECHNOLOGY_TRANSFER
  ENTREPRENEURSHIP_SUPPORT
  INTELLECTUAL_PROPERTY
  STARTUP_INCUBATION
  DIGITAL_INFRASTRUCTURE
  SMART_CITIES
  EMERGENCY_RESPONSE
  DISASTER_PREPAREDNESS
  PANDEMIC_MANAGEMENT
  CYBERSECURITY
  COUNTER_TERRORISM
  CRISIS_COMMUNICATION
  RECOVERY_PLANNING
  RESILIENCE_BUILDING
  ANTI_CORRUPTION
  TRANSPARENCY_INITIATIVE
  ACCOUNTABILITY_FRAMEWORK
  ETHICS_ENFORCEMENT
  PUBLIC_OVERSIGHT
  CITIZEN_ENGAGEMENT
  PARTICIPATORY_DEMOCRACY
  DIRECT_DEMOCRACY
  MINIMAL_GOVERNMENT
  PRIVATE_SECTOR_LEADERSHIP
  SOCIAL_DEMOCRACY
  COMPREHENSIVE_WELFARE
  PUBLIC_SECTOR_LEADERSHIP
  ENVIRONMENTAL_FOCUS
  ECONOMIC_PLANNING
  DEVELOPMENTAL_STATE
  REGIONAL_DEVELOPMENT
  MERITOCRATIC_SYSTEM
}

enum EconomicComponentType {
  FREE_MARKET_SYSTEM
  MIXED_ECONOMY
  STATE_CAPITALISM
  PLANNED_ECONOMY
  SOCIAL_MARKET_ECONOMY
  RESOURCE_BASED_ECONOMY
  KNOWLEDGE_ECONOMY
  INNOVATION_ECONOMY
  AGRICULTURE_LED
  MANUFACTURING_LED
  SERVICE_BASED
  TECHNOLOGY_FOCUSED
  FINANCE_CENTERED
  EXPORT_ORIENTED
  DOMESTIC_FOCUSED
  TOURISM_BASED
  FLEXIBLE_LABOR
  PROTECTED_WORKERS
  UNION_BASED
  GIG_ECONOMY
  PROFESSIONAL_SERVICES
  SKILL_BASED
  EDUCATION_FIRST
  MERIT_BASED
  HIGH_SKILLED_WORKERS
  EDUCATION_FOCUSED
  HEALTHCARE_FOCUSED
  VOCATIONAL_TRAINING
  FREE_TRADE
  PROTECTIONIST
  BALANCED_TRADE
  EXPORT_SUBSIDY
  IMPORT_SUBSTITUTION
  TRADE_BLOC
  BILATERAL_FOCUS
  MULTILATERAL_FOCUS
  TRADE_FACILITATION
  COMPETITIVE_MARKETS
  RD_INVESTMENT
  TECH_TRANSFER
  STARTUP_ECOSYSTEM
  PATENT_PROTECTION
  OPEN_INNOVATION
  UNIVERSITY_PARTNERSHIPS
  VENTURE_CAPITAL
  INTELLECTUAL_PROPERTY
  RESEARCH_AND_DEVELOPMENT
  SUSTAINABLE_DEVELOPMENT
  EXTRACTION_FOCUSED
  RENEWABLE_ENERGY
  CIRCULAR_ECONOMY
  LINEAR_ECONOMY
  CONSERVATION_FIRST
  GREEN_TECHNOLOGY
  CARBON_NEUTRAL
  CARBON_INTENSIVE
  ECO_FRIENDLY
  GREEN_ECONOMY
  REAL_ESTATE_FOCUSED
  RULE_OF_LAW
}

enum TaxComponentType {
  PROGRESSIVE_TAX
  FLAT_TAX
  REGRESSIVE_TAX
  CONSUMPTION_TAX
  WEALTH_TAX
  INHERITANCE_TAX
  CAPITAL_GAINS_TAX
  CORPORATE_TAX
  PAYROLL_TAX
  PROPERTY_TAX
  SALES_TAX
  VAT_TAX
  CARBON_TAX
  FINANCIAL_TRANSACTION_TAX
  DIGITAL_SERVICES_TAX
  AUTOMATED_COLLECTION
  MANUAL_COLLECTION
  THIRD_PARTY_REPORTING
  WITHHOLDING_SYSTEM
  SELF_ASSESSMENT
  AUDIT_SYSTEM
  COMPLIANCE_MONITORING
  TAX_COURTS
  APPEALS_PROCESS
  PENALTY_SYSTEM
  E_FILING_SYSTEM
  DIGITAL_PAYMENTS
  BLOCKCHAIN_TRACKING
  AI_AUDIT
  PREDICTIVE_ANALYTICS
  RISK_ASSESSMENT
  DATA_MINING
  CROSS_BORDER_COORDINATION
  TAX_INCENTIVES
  TAX_HOLIDAYS
  TAX_EXEMPTIONS
  TAX_CREDITS
  TAX_DEDUCTIONS
  TAX_AMNESTY
  TAX_AVOIDANCE_PREVENTION
  TAX_EVASION_PREVENTION
  TAX_FAIRNESS
  TAX_SIMPLIFICATION
}

enum BudgetCategoryType {
  MANDATORY
  DISCRETIONARY
  EMERGENCY
}

enum BudgetPriorityLevel {
  critical
  high
  medium
  low
}

enum BriefingType {
  HOT_ISSUE
  OPPORTUNITY
  RISK_MITIGATION
  STRATEGIC_INITIATIVE
}

enum Urgency {
  IMMEDIATE
  THIS_WEEK
  THIS_MONTH
  THIS_QUARTER
}

enum Magnitude {
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

enum Difficulty {
  MINOR
  MODERATE
  MAJOR
  TRANSFORMATIONAL
}

enum BranchType {
  army
  navy
  air_force
  space_force
  marines
  cyber_command
  special_forces
  coast_guard
}

enum AssetType {
  aircraft
  ship
  vehicle
  weapon_system
  installation
}

enum AssetStatus {
  operational
  maintenance
  reserve
  retired
}

enum ThreatType {
  military
  terrorism
  insurgency
  cyber
  organized_crime
  espionage
  nuclear
  biological
  natural_disaster
}

enum ThreatSeverity {
  existential
  critical
  high
  moderate
  low
}

enum ThreatStatus {
  monitoring
  responding
  contained
  resolved
}

/// *
///  * CardType - Classification of card types
enum CardType {
  NATION
  LORE
  NS_IMPORT
  SPECIAL
  COMMUNITY
}

/// *
///  * CardRarity - Rarity tiers for cards
enum CardRarity {
  COMMON
  UNCOMMON
  RARE
  ULTRA_RARE
  EPIC
  LEGENDARY
}

/// *
///  * PackType - Types of card packs
enum PackType {
  BASIC
  PREMIUM
  ELITE
  THEMED
  SEASONAL
  EVENT
}

/// *
///  * AcquireMethod - How a card was acquired
enum AcquireMethod {
  PACK
  TRADE
  AUCTION
  CRAFT
  GIFT
  NS_IMPORT
  ACHIEVEMENT
  EVENT
}

/// *
///  * AuctionStatus - Auction lifecycle status
enum AuctionStatus {
  ACTIVE
  COMPLETED
  CANCELLED
}

/// *
///  * TradeStatus - Trade lifecycle status
enum TradeStatus {
  PENDING
  ACCEPTED
  REJECTED
  CANCELLED
  EXPIRED
}

/// *
///  * VaultTransactionType - Types of IxCredits transactions
enum VaultTransactionType {
  EARN_PASSIVE
  EARN_ACTIVE
  EARN_CARDS
  EARN_SOCIAL
  SPEND_PACKS
  SPEND_MARKET
  SPEND_CRAFT
  SPEND_BOOST
  SPEND_COSMETIC
  ADMIN_ADJUSTMENT
}
