@import "tailwindcss";

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));
}

/* Import modular CSS files */
@import "./shared-utilities.css";
@import "./animations.css";
@import "./performance.css";
@import "./compact-mode.css";
@import "./themes.css";
@import "./aurora-backgrounds.css";
@import "./typography.css";
@import "./components.css";
@import "./charts.css";
@import "./light-mode-overrides.css";
@import "./country-theming.css";
@import "./mycountry-theming.css";
@import "./glass-refraction.css";
@import "./diplomatic-intelligence.css";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* Glow text effects for popover numbers and percentages */
.glow-text {
  text-shadow: 0 0 8px currentColor, 0 0 16px currentColor, 0 0 24px currentColor;
  animation: glow-pulse 2s ease-in-out infinite;
}

@keyframes glow-pulse {
  0%, 100% {
    text-shadow: 0 0 8px currentColor, 0 0 16px currentColor, 0 0 24px currentColor;
    opacity: 1;
  }
  50% {
    text-shadow: 0 0 12px currentColor, 0 0 24px currentColor, 0 0 36px currentColor;
    opacity: 0.8;
  }
}

/* Shimmer effect for important numbers */
.shimmer-text {
  background: linear-gradient(90deg, 
    currentColor 0%, 
    rgba(255, 255, 255, 0.8) 50%, 
    currentColor 100%);
  background-size: 200% 100%;
  background-clip: text;
  -webkit-background-clip: text;
  animation: shimmer 2s linear infinite;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Dashboard section branding - color-specific glows */
.dashboard-section-mycountry {
  border: 1px solid rgba(202, 138, 4, 0.3);
  box-shadow: 0 0 20px rgba(202, 138, 4, 0.15), 0 4px 12px rgba(202, 138, 4, 0.1);
  transition: box-shadow 0.3s ease;
}

.dashboard-section-mycountry:hover {
  box-shadow: 0 0 30px rgba(202, 138, 4, 0.25), 0 6px 20px rgba(202, 138, 4, 0.15);
}

.dashboard-section-global {
  border: 1px solid rgba(37, 99, 235, 0.3);
  box-shadow: 0 0 20px rgba(37, 99, 235, 0.15), 0 4px 12px rgba(37, 99, 235, 0.1);
  transition: box-shadow 0.3s ease;
}

.dashboard-section-global:hover {
  box-shadow: 0 0 30px rgba(37, 99, 235, 0.25), 0 6px 20px rgba(37, 99, 235, 0.15);
}

.dashboard-section-eci {
  border: 1px solid rgba(79, 70, 229, 0.3);
  box-shadow: 0 0 20px rgba(79, 70, 229, 0.15), 0 4px 12px rgba(79, 70, 229, 0.1);
  transition: box-shadow 0.3s ease;
}

.dashboard-section-eci:hover {
  box-shadow: 0 0 30px rgba(79, 70, 229, 0.25), 0 6px 20px rgba(79, 70, 229, 0.15);
}

.dashboard-section-sdi {
  border: 1px solid rgba(220, 38, 38, 0.3);
  box-shadow: 0 0 20px rgba(220, 38, 38, 0.15), 0 4px 12px rgba(220, 38, 38, 0.1);
  transition: box-shadow 0.3s ease;
}

.dashboard-section-sdi:hover {
  box-shadow: 0 0 30px rgba(220, 38, 38, 0.25), 0 6px 20px rgba(220, 38, 38, 0.15);
}

/* Rainbow animation for I'm Feeling Lucky button */
@keyframes rainbow {
  0% {
    background-position: 0%;
  }
  100% {
    background-position: 200%;
  }
}

/* Subtle rainbow animation for I'm Feeling Lucky button */
@keyframes rainbow-subtle {
  0%, 100% {
    background-position: 0% 50%;
  }
  25% {
    background-position: 100% 50%;
  }
  50% {
    background-position: 100% 100%;
  }
  75% {
    background-position: 0% 100%;
  }
}

/* Shimmer animation for text */
@keyframes shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

:root {
  --color-1: oklch(66.2% 0.225 25.9);
  --color-2: oklch(60.4% 0.26 302);
  --color-3: oklch(69.6% 0.165 251);
  --color-4: oklch(80.2% 0.134 225);
  --color-5: oklch(90.7% 0.231 133);
  --animate-rainbow: rainbow 2s infinite linear;
}

.dark {
  --color-1: oklch(66.2% 0.225 25.9);
  --color-2: oklch(60.4% 0.26 302);
  --color-3: oklch(69.6% 0.165 251);
  --color-4: oklch(80.2% 0.134 225);
  --color-5: oklch(90.7% 0.231 133);
}

@theme inline {
  --animate-marquee: marquee var(--duration) infinite linear;
  --animate-marquee-vertical: marquee-vertical var(--duration) linear infinite;
  @keyframes marquee {
  from {
    transform: translateX(0);
    }
  to {
    transform: translateX(calc(-100% - var(--gap)));
    }
  }
  @keyframes marquee-vertical {
  from {
    transform: translateY(0);
    }
  to {
    transform: translateY(calc(-100% - var(--gap)));
    }
  }
  --animate-shiny-text: shiny-text 8s infinite
;
  @keyframes shiny-text {
  0%, 90%, 100% {
    background-position: calc(-100% - var(--shiny-width)) 0;
    }
  30%, 60% {
    background-position: calc(100% + var(--shiny-width)) 0;
    }
  }
  @keyframes marquee {
  from {
    transform: translateX(0);
    }
  to {
    transform: translateX(calc(-100% - var(--gap)));
    }
  }
  @keyframes marquee-vertical {
  from {
    transform: translateY(0);
    }
  to {
    transform: translateY(calc(-100% - var(--gap)));
    }
  }
  @keyframes shiny-text {
  0%, 90%, 100% {
    background-position: calc(-100% - var(--shiny-width)) 0;
    }
  30%, 60% {
    background-position: calc(100% + var(--shiny-width)) 0;
    }
  }
  --animate-shine: shine var(--duration) infinite linear;
  @keyframes shine {
  0% {
    background-position: 0% 0%;
    }
  50% {
    background-position: 100% 100%;
    }
  to {
    background-position: 0% 0%;
    }
  }}

@layer base {
  body {
    @apply bg-background text-foreground;
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer utilities {
  /* Global content width for all sections using Tailwind's container */
  .container {
    max-width: 1536px; /* screen-2xl */
  }
}

/* ====================================
   COMPREHENSIVE Z-INDEX SYSTEM
   ==================================== */

/* 
   THINKPAGES Z-INDEX HIERARCHY (Low to High):
   z-1    → glass-hierarchy-parent (base cards)
   z-2    → glass-hierarchy-child (account manager, nested cards)
   z-3    → glass-hierarchy-interactive (buttons, hover states)
   z-40   → tooltips, hover previews
   z-50   → post options menu
   z-100  → reaction popups (PRIORITY: must be above all content)
   z-9998 → dialog overlays
   z-9999 → dialog content, dropdowns
*/

/* Ensure ALL dropdown and popover components ALWAYS appear on top */
[data-radix-select-content],
[data-radix-dropdown-menu-content],
[data-radix-popover-content],
[data-radix-tooltip-content],
[data-radix-dialog-content],
[data-radix-alert-dialog-content] {
  z-index: 9999 !important;
  position: fixed !important;
}

/* Radix Portal elements (where most dropdowns render) */
[data-radix-portal] {
  z-index: 9999 !important;
}

/* Specific Tailwind/Radix components by attribute selectors */
[data-state="open"][role="menu"],
[data-state="open"][role="listbox"],
[data-state="open"][role="combobox"],
[data-side="top"], [data-side="bottom"], [data-side="left"], [data-side="right"] {
  z-index: 9999 !important;
}

/* Additional comprehensive dropdown selectors */
.dropdown-content,
.popover-content,
.select-content,
[role="menu"],
[role="listbox"],
[role="combobox"],
[data-radix-popper-content-wrapper] {
  z-index: 9999 !important;
}

/* Ensure dialog overlays are properly layered */
[data-radix-dialog-overlay] {
  z-index: 9998 !important;
}

/* Glass hierarchy base z-indices (much lower than dropdowns) */
.glass-hierarchy-parent {
  z-index: 1;
}

.glass-hierarchy-child {
  z-index: 2;
}

.glass-hierarchy-interactive {
  z-index: 3;
}

/* For Webkit browsers (Chrome, Safari) */
.hide-scrollbar::-webkit-scrollbar {
    display: none;
}

/* For IE, Edge and Firefox */
.hide-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}

::view-transition-old(root), ::view-transition-new(root) {
    animation: none;
    mix-blend-mode: normal;
}

/* Ripple effect for flag on hover */
.group:hover .ripple-effect::after {
  content: '';
  position: absolute;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.7); /* White ripple */
  animation: ripple 0.6s linear forwards;
  transform: scale(0);
  opacity: 1;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
}

@keyframes ripple {
  to {
    transform: scale(2);
    opacity: 0;
  }
}
